import{y as st,z as be,r as A,d as h,v as De,D as ut,W as Qe,X as ct,Y as dt,h as k,Z as G,$ as Ve,a0 as vt,a1 as ae,N as ft,g as ne,a2 as ht,a3 as mt,c as X,a4 as pe,a5 as Be,s as ee,C as gt,a6 as bt,a7 as pt,e as re,a8 as yt,a9 as _t,aa as J,E as kt,ab as wt,ac as le,ad as ye,ae as Re,af as _e,O as Tt,T as Ct,ag as qt,ah as xt,ai as Pt,aj as St,ak as $t,u as Ne,al as At,a as ze,am as Lt,S as Bt,an as Rt,_ as je,o as U,ao as ke,ap as We,aq as Fe,l as te,j as ce,w as q,k as y,m as Oe,t as Z,Q as It,n as Et,ar as Ue,U as Mt,V as Dt}from"./index.2bdf090b.js";import{Q as Qt,u as Vt}from"./auth.cb153177.js";import{a as Ke,Q as Nt}from"./QPage.9af658e1.js";let zt=0;const jt=["click","keydown"],Wt={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${zt++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function Ft(e,t,s,u){const r=st(Qe,be);if(r===be)return console.error("QTab/QRouteTab component needs to be child of QTabs"),be;const{proxy:a}=ne(),i=A(null),v=A(null),S=A(null),L=h(()=>e.disable===!0||e.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},e.ripple===!0?{}:e.ripple)),m=h(()=>r.currentModel.value===e.name),B=h(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(m.value===!0?" q-tab--active"+(r.tabProps.value.activeClass?" "+r.tabProps.value.activeClass:"")+(r.tabProps.value.activeColor?` text-${r.tabProps.value.activeColor}`:"")+(r.tabProps.value.activeBgColor?` bg-${r.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(e.icon&&e.label&&r.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(e.noCaps===!0||r.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(e.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")+(u!==void 0?u.linkClass.value:"")),g=h(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(r.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(e.contentClass!==void 0?` ${e.contentClass}`:"")),b=h(()=>e.disable===!0||r.hasFocus.value===!0||m.value===!1&&r.hasActiveTab.value===!0?-1:e.tabindex||0);function x(o,C){if(C!==!0&&i.value!==null&&i.value.focus(),e.disable===!0){u!==void 0&&u.hasRouterLink.value===!0&&G(o);return}if(u===void 0){r.updateModel({name:e.name}),s("click",o);return}if(u.hasRouterLink.value===!0){const E=(P={})=>{let $;const Q=P.to===void 0||ht(P.to,e.to)===!0?r.avoidRouteWatcher=mt():null;return u.navigateToRouterLink(o,{...P,returnRouterError:!0}).catch(N=>{$=N}).then(N=>{if(Q===r.avoidRouteWatcher&&(r.avoidRouteWatcher=!1,$===void 0&&(N===void 0||N.message.startsWith("Avoided redundant navigation")===!0)&&r.updateModel({name:e.name})),P.returnRouterError===!0)return $!==void 0?Promise.reject($):N})};s("click",o,E),o.defaultPrevented!==!0&&E();return}s("click",o)}function R(o){Ve(o,[13,32])?x(o,!0):vt(o)!==!0&&o.keyCode>=35&&o.keyCode<=40&&o.altKey!==!0&&o.metaKey!==!0&&r.onKbdNavigate(o.keyCode,a.$el)===!0&&G(o),s("keydown",o)}function D(){const o=r.tabProps.value.narrowIndicator,C=[],E=k("div",{ref:S,class:["q-tab__indicator",r.tabProps.value.indicatorClass]});e.icon!==void 0&&C.push(k(ae,{class:"q-tab__icon",name:e.icon})),e.label!==void 0&&C.push(k("div",{class:"q-tab__label"},e.label)),e.alert!==!1&&C.push(e.alertIcon!==void 0?k(ae,{class:"q-tab__alert-icon",color:e.alert!==!0?e.alert:void 0,name:e.alertIcon}):k("div",{class:"q-tab__alert"+(e.alert!==!0?` text-${e.alert}`:"")})),o===!0&&C.push(E);const P=[k("div",{class:"q-focus-helper",tabindex:-1,ref:i}),k("div",{class:g.value},ft(t.default,C))];return o===!1&&P.push(E),P}const V={name:h(()=>e.name),rootRef:v,tabIndicatorRef:S,routeData:u};De(()=>{r.unregisterTab(V)}),ut(()=>{r.registerTab(V)});function z(o,C){const E={ref:v,class:B.value,tabindex:b.value,role:"tab","aria-selected":m.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:x,onKeydown:R,...C};return ct(k(o,E,D()),[[dt,L.value]])}return{renderTab:z,$tabs:r}}var se=X({name:"QTab",props:Wt,emits:jt,setup(e,{slots:t,emit:s}){const{renderTab:u}=Ft(e,t,s);return()=>u("div")}});let Xe=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const t=document.createElement("div");Object.assign(t.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(t),e.scrollLeft=-1e3,Xe=e.scrollLeft>=0,e.remove()}function Ot(e,t,s){const u=s===!0?["left","right"]:["top","bottom"];return`absolute-${t===!0?u[0]:u[1]}${e?` text-${e}`:""}`}const Ut=["left","center","right","justify"];var Kt=X({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:e=>Ut.includes(e)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(e,{slots:t,emit:s}){const{proxy:u}=ne(),{$q:r}=u,{registerTick:a}=pe(),{registerTick:i}=pe(),{registerTick:v}=pe(),{registerTimeout:S,removeTimeout:L}=Be(),{registerTimeout:m,removeTimeout:B}=Be(),g=A(null),b=A(null),x=A(e.modelValue),R=A(!1),D=A(!0),V=A(!1),z=A(!1),o=[],C=A(0),E=A(!1);let P=null,$=null,Q;const N=h(()=>({activeClass:e.activeClass,activeColor:e.activeColor,activeBgColor:e.activeBgColor,indicatorClass:Ot(e.indicatorColor,e.switchIndicator,e.vertical),narrowIndicator:e.narrowIndicator,inlineLabel:e.inlineLabel,noCaps:e.noCaps})),de=h(()=>{const n=C.value,l=x.value;for(let c=0;c<n;c++)if(o[c].name.value===l)return!0;return!1}),ve=h(()=>`q-tabs__content--align-${R.value===!0?"left":z.value===!0?"justify":e.align}`),fe=h(()=>`q-tabs row no-wrap items-center q-tabs--${R.value===!0?"":"not-"}scrollable q-tabs--${e.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${e.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${e.mobileArrows===!0?"":"out"}-arrows`+(e.dense===!0?" q-tabs--dense":"")+(e.shrink===!0?" col-shrink":"")+(e.stretch===!0?" self-stretch":"")),d=h(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+ve.value+(e.contentClass!==void 0?` ${e.contentClass}`:"")),_=h(()=>e.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),M=h(()=>e.vertical!==!0&&r.lang.rtl===!0),W=h(()=>Xe===!1&&M.value===!0);ee(M,Y),ee(()=>e.modelValue,n=>{he({name:n,setCurrent:!0,skipEmit:!0})}),ee(()=>e.outsideArrows,oe);function he({name:n,setCurrent:l,skipEmit:c}){x.value!==n&&(c!==!0&&e["onUpdate:modelValue"]!==void 0&&s("update:modelValue",n),(l===!0||e["onUpdate:modelValue"]===void 0)&&(Ge(x.value,n),x.value=n))}function oe(){a(()=>{Te({width:g.value.offsetWidth,height:g.value.offsetHeight})})}function Te(n){if(_.value===void 0||b.value===null)return;const l=n[_.value.container],c=Math.min(b.value[_.value.scroll],Array.prototype.reduce.call(b.value.children,(T,p)=>T+(p[_.value.content]||0),0)),w=l>0&&c>l;R.value=w,w===!0&&i(Y),z.value=l<parseInt(e.breakpoint,10)}function Ge(n,l){const c=n!=null&&n!==""?o.find(T=>T.name.value===n):null,w=l!=null&&l!==""?o.find(T=>T.name.value===l):null;if(c&&w){const T=c.tabIndicatorRef.value,p=w.tabIndicatorRef.value;P!==null&&(clearTimeout(P),P=null),T.style.transition="none",T.style.transform="none",p.style.transition="none",p.style.transform="none";const f=T.getBoundingClientRect(),I=p.getBoundingClientRect();p.style.transform=e.vertical===!0?`translate3d(0,${f.top-I.top}px,0) scale3d(1,${I.height?f.height/I.height:1},1)`:`translate3d(${f.left-I.left}px,0,0) scale3d(${I.width?f.width/I.width:1},1,1)`,v(()=>{P=setTimeout(()=>{P=null,p.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",p.style.transform="none"},70)})}w&&R.value===!0&&H(w.rootRef.value)}function H(n){const{left:l,width:c,top:w,height:T}=b.value.getBoundingClientRect(),p=n.getBoundingClientRect();let f=e.vertical===!0?p.top-w:p.left-l;if(f<0){b.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(f),Y();return}f+=e.vertical===!0?p.height-T:p.width-c,f>0&&(b.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(f),Y())}function Y(){const n=b.value;if(n===null)return;const l=n.getBoundingClientRect(),c=e.vertical===!0?n.scrollTop:Math.abs(n.scrollLeft);M.value===!0?(D.value=Math.ceil(c+l.width)<n.scrollWidth-1,V.value=c>0):(D.value=c>0,V.value=e.vertical===!0?Math.ceil(c+l.height)<n.scrollHeight:Math.ceil(c+l.width)<n.scrollWidth)}function Ce(n){$!==null&&clearInterval($),$=setInterval(()=>{et(n)===!0&&F()},5)}function qe(){Ce(W.value===!0?Number.MAX_SAFE_INTEGER:0)}function xe(){Ce(W.value===!0?0:Number.MAX_SAFE_INTEGER)}function F(){$!==null&&(clearInterval($),$=null)}function Ze(n,l){const c=Array.prototype.filter.call(b.value.children,I=>I===l||I.matches&&I.matches(".q-tab.q-focusable")===!0),w=c.length;if(w===0)return;if(n===36)return H(c[0]),c[0].focus(),!0;if(n===35)return H(c[w-1]),c[w-1].focus(),!0;const T=n===(e.vertical===!0?38:37),p=n===(e.vertical===!0?40:39),f=T===!0?-1:p===!0?1:void 0;if(f!==void 0){const I=M.value===!0?-1:1,j=c.indexOf(l)+f*I;return j>=0&&j<w&&(H(c[j]),c[j].focus({preventScroll:!0})),!0}}const Je=h(()=>W.value===!0?{get:n=>Math.abs(n.scrollLeft),set:(n,l)=>{n.scrollLeft=-l}}:e.vertical===!0?{get:n=>n.scrollTop,set:(n,l)=>{n.scrollTop=l}}:{get:n=>n.scrollLeft,set:(n,l)=>{n.scrollLeft=l}});function et(n){const l=b.value,{get:c,set:w}=Je.value;let T=!1,p=c(l);const f=n<p?-1:1;return p+=f*5,p<0?(T=!0,p=0):(f===-1&&p<=n||f===1&&p>=n)&&(T=!0,p=n),w(l,p),Y(),T}function Pe(n,l){for(const c in n)if(n[c]!==l[c])return!1;return!0}function tt(){let n=null,l={matchedLen:0,queryDiff:9999,hrefLen:0};const c=o.filter(f=>f.routeData!==void 0&&f.routeData.hasRouterLink.value===!0),{hash:w,query:T}=u.$route,p=Object.keys(T).length;for(const f of c){const I=f.routeData.exact.value===!0;if(f.routeData[I===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:j,query:me,matched:it,href:lt}=f.routeData.resolvedLink.value,ge=Object.keys(me).length;if(I===!0){if(j!==w||ge!==p||Pe(T,me)===!1)continue;n=f.name.value;break}if(j!==""&&j!==w||ge!==0&&Pe(me,T)===!1)continue;const O={matchedLen:it.length,queryDiff:p-ge,hrefLen:lt.length-j.length};if(O.matchedLen>l.matchedLen){n=f.name.value,l=O;continue}else if(O.matchedLen!==l.matchedLen)continue;if(O.queryDiff<l.queryDiff)n=f.name.value,l=O;else if(O.queryDiff!==l.queryDiff)continue;O.hrefLen>l.hrefLen&&(n=f.name.value,l=O)}n===null&&o.some(f=>f.routeData===void 0&&f.name.value===x.value)===!0||he({name:n,setCurrent:!0})}function at(n){if(L(),E.value!==!0&&g.value!==null&&n.target&&typeof n.target.closest=="function"){const l=n.target.closest(".q-tab");l&&g.value.contains(l)===!0&&(E.value=!0,R.value===!0&&H(l))}}function nt(){S(()=>{E.value=!1},30)}function ie(){$e.avoidRouteWatcher===!1?m(tt):B()}function Se(){if(Q===void 0){const n=ee(()=>u.$route.fullPath,ie);Q=()=>{n(),Q=void 0}}}function rt(n){o.push(n),C.value++,oe(),n.routeData===void 0||u.$route===void 0?m(()=>{if(R.value===!0){const l=x.value,c=l!=null&&l!==""?o.find(w=>w.name.value===l):null;c&&H(c.rootRef.value)}}):(Se(),n.routeData.hasRouterLink.value===!0&&ie())}function ot(n){o.splice(o.indexOf(n),1),C.value--,oe(),Q!==void 0&&n.routeData!==void 0&&(o.every(l=>l.routeData===void 0)===!0&&Q(),ie())}const $e={currentModel:x,tabProps:N,hasFocus:E,hasActiveTab:de,registerTab:rt,unregisterTab:ot,verifyRouteModel:ie,updateModel:he,onKbdNavigate:Ze,avoidRouteWatcher:!1};gt(Qe,$e);function Ae(){P!==null&&clearTimeout(P),F(),Q!==void 0&&Q()}let Le;return De(Ae),bt(()=>{Le=Q!==void 0,Ae()}),pt(()=>{Le===!0&&Se(),oe()}),()=>k("div",{ref:g,class:fe.value,role:"tablist",onFocusin:at,onFocusout:nt},[k(Qt,{onResize:Te}),k("div",{ref:b,class:d.value,onScroll:Y},re(t.default)),k(ae,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(D.value===!0?"":" q-tabs__arrow--faded"),name:e.leftIcon||r.iconSet.tabs[e.vertical===!0?"up":"left"],onMousedownPassive:qe,onTouchstartPassive:qe,onMouseupPassive:F,onMouseleavePassive:F,onTouchendPassive:F}),k(ae,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(V.value===!0?"":" q-tabs__arrow--faded"),name:e.rightIcon||r.iconSet.tabs[e.vertical===!0?"down":"right"],onMousedownPassive:xe,onTouchstartPassive:xe,onMouseupPassive:F,onMouseleavePassive:F,onTouchendPassive:F})])}});const we={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},Xt=Object.keys(we);we.all=!0;function Ie(e){const t={};for(const s of Xt)e[s]===!0&&(t[s]=!0);return Object.keys(t).length===0?we:(t.horizontal===!0?t.left=t.right=!0:t.left===!0&&t.right===!0&&(t.horizontal=!0),t.vertical===!0?t.up=t.down=!0:t.up===!0&&t.down===!0&&(t.vertical=!0),t.horizontal===!0&&t.vertical===!0&&(t.all=!0),t)}const Ht=["INPUT","TEXTAREA"];function Ee(e,t){return t.event===void 0&&e.target!==void 0&&e.target.draggable!==!0&&typeof t.handler=="function"&&Ht.includes(e.target.nodeName.toUpperCase())===!1&&(e.qClonedBy===void 0||e.qClonedBy.indexOf(t.uid)===-1)}function Yt(){if(window.getSelection!==void 0){const e=window.getSelection();e.empty!==void 0?e.empty():e.removeAllRanges!==void 0&&(e.removeAllRanges(),yt.is.mobile!==!0&&e.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}function Gt(e){const t=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((s,u)=>{const r=parseFloat(s);r&&(t[u]=r)}),t}var Zt=_t({name:"touch-swipe",beforeMount(e,{value:t,arg:s,modifiers:u}){if(u.mouse!==!0&&J.has.touch!==!0)return;const r=u.mouseCapture===!0?"Capture":"",a={handler:t,sensitivity:Gt(s),direction:Ie(u),noop:kt,mouseStart(i){Ee(i,a)&&wt(i)&&(le(a,"temp",[[document,"mousemove","move",`notPassive${r}`],[document,"mouseup","end","notPassiveCapture"]]),a.start(i,!0))},touchStart(i){if(Ee(i,a)){const v=i.target;le(a,"temp",[[v,"touchmove","move","notPassiveCapture"],[v,"touchcancel","end","notPassiveCapture"],[v,"touchend","end","notPassiveCapture"]]),a.start(i)}},start(i,v){J.is.firefox===!0&&ye(e,!0);const S=Re(i);a.event={x:S.left,y:S.top,time:Date.now(),mouse:v===!0,dir:!1}},move(i){if(a.event===void 0)return;if(a.event.dir!==!1){G(i);return}const v=Date.now()-a.event.time;if(v===0)return;const S=Re(i),L=S.left-a.event.x,m=Math.abs(L),B=S.top-a.event.y,g=Math.abs(B);if(a.event.mouse!==!0){if(m<a.sensitivity[1]&&g<a.sensitivity[1]){a.end(i);return}}else if(window.getSelection().toString()!==""){a.end(i);return}else if(m<a.sensitivity[2]&&g<a.sensitivity[2])return;const b=m/v,x=g/v;a.direction.vertical===!0&&m<g&&m<100&&x>a.sensitivity[0]&&(a.event.dir=B<0?"up":"down"),a.direction.horizontal===!0&&m>g&&g<100&&b>a.sensitivity[0]&&(a.event.dir=L<0?"left":"right"),a.direction.up===!0&&m<g&&B<0&&m<100&&x>a.sensitivity[0]&&(a.event.dir="up"),a.direction.down===!0&&m<g&&B>0&&m<100&&x>a.sensitivity[0]&&(a.event.dir="down"),a.direction.left===!0&&m>g&&L<0&&g<100&&b>a.sensitivity[0]&&(a.event.dir="left"),a.direction.right===!0&&m>g&&L>0&&g<100&&b>a.sensitivity[0]&&(a.event.dir="right"),a.event.dir!==!1?(G(i),a.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Yt(),a.styleCleanup=R=>{a.styleCleanup=void 0,document.body.classList.remove("non-selectable");const D=()=>{document.body.classList.remove("no-pointer-events--children")};R===!0?setTimeout(D,50):D()}),a.handler({evt:i,touch:a.event.mouse!==!0,mouse:a.event.mouse,direction:a.event.dir,duration:v,distance:{x:m,y:g}})):a.end(i)},end(i){a.event!==void 0&&(_e(a,"temp"),J.is.firefox===!0&&ye(e,!1),a.styleCleanup!==void 0&&a.styleCleanup(!0),i!==void 0&&a.event.dir!==!1&&G(i),a.event=void 0)}};if(e.__qtouchswipe=a,u.mouse===!0){const i=u.mouseCapture===!0||u.mousecapture===!0?"Capture":"";le(a,"main",[[e,"mousedown","mouseStart",`passive${i}`]])}J.has.touch===!0&&le(a,"main",[[e,"touchstart","touchStart",`passive${u.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,t){const s=e.__qtouchswipe;s!==void 0&&(t.oldValue!==t.value&&(typeof t.value!="function"&&s.end(),s.handler=t.value),s.direction=Ie(t.modifiers))},beforeUnmount(e){const t=e.__qtouchswipe;t!==void 0&&(_e(t,"main"),_e(t,"temp"),J.is.firefox===!0&&ye(e,!1),t.styleCleanup!==void 0&&t.styleCleanup(),delete e.__qtouchswipe)}});function Jt(){const e=new Map;return{getCache:function(t,s){return e[t]===void 0?e[t]=s:e[t]},getCacheWithFn:function(t,s){return e[t]===void 0?e[t]=s():e[t]}}}const ea={name:{required:!0},disable:Boolean},Me={setup(e,{slots:t}){return()=>k("div",{class:"q-panel scroll",role:"tabpanel"},re(t.default))}},ta={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},aa=["update:modelValue","beforeTransition","transition"];function na(){const{props:e,emit:t,proxy:s}=ne(),{getCacheWithFn:u}=Jt();let r,a;const i=A(null),v=A(null);function S(d){const _=e.vertical===!0?"up":"left";$((s.$q.lang.rtl===!0?-1:1)*(d.direction===_?1:-1))}const L=h(()=>[[Zt,S,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),m=h(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),B=h(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),g=h(()=>`--q-transition-duration: ${e.transitionDuration}ms`),b=h(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),x=h(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),R=h(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);ee(()=>e.modelValue,(d,_)=>{const M=o(d)===!0?C(d):-1;a!==!0&&P(M===-1?0:M<C(_)?-1:1),i.value!==M&&(i.value=M,t("beforeTransition",d,_),Tt(()=>{t("transition",d,_)}))});function D(){$(1)}function V(){$(-1)}function z(d){t("update:modelValue",d)}function o(d){return d!=null&&d!==""}function C(d){return r.findIndex(_=>_.props.name===d&&_.props.disable!==""&&_.props.disable!==!0)}function E(){return r.filter(d=>d.props.disable!==""&&d.props.disable!==!0)}function P(d){const _=d!==0&&e.animated===!0&&i.value!==-1?"q-transition--"+(d===-1?m.value:B.value):null;v.value!==_&&(v.value=_)}function $(d,_=i.value){let M=_+d;for(;M>-1&&M<r.length;){const W=r[M];if(W!==void 0&&W.props.disable!==""&&W.props.disable!==!0){P(d),a=!0,t("update:modelValue",W.props.name),setTimeout(()=>{a=!1});return}M+=d}e.infinite===!0&&r.length!==0&&_!==-1&&_!==r.length&&$(d,d===-1?r.length:-1)}function Q(){const d=C(e.modelValue);return i.value!==d&&(i.value=d),!0}function N(){const d=o(e.modelValue)===!0&&Q()&&r[i.value];return e.keepAlive===!0?[k(xt,x.value,[k(R.value===!0?u(b.value,()=>({...Me,name:b.value})):Me,{key:b.value,style:g.value},()=>d)])]:[k("div",{class:"q-panel scroll",style:g.value,key:b.value,role:"tabpanel"},[d])]}function de(){if(r.length!==0)return e.animated===!0?[k(Ct,{name:v.value},N)]:N()}function ve(d){return r=qt(re(d.default,[])).filter(_=>_.props!==null&&_.props.slot===void 0&&o(_.props.name)===!0),r.length}function fe(){return r}return Object.assign(s,{next:D,previous:V,goTo:z}),{panelIndex:i,panelDirectives:L,updatePanelsList:ve,updatePanelIndex:Q,getPanelContent:de,getEnabledPanels:E,getPanels:fe,isValidPanelName:o,keepAliveProps:x,needsUniqueKeepAliveWrapper:R,goToPanelByOffset:$,goToPanel:z,nextPanel:D,previousPanel:V}}var ue=X({name:"QTabPanel",props:ea,setup(e,{slots:t}){return()=>k("div",{class:"q-tab-panel",role:"tabpanel"},re(t.default))}}),He=X({name:"QAvatar",props:{...Pt,fontSize:String,color:String,textColor:String,icon:String,square:Boolean,rounded:Boolean},setup(e,{slots:t}){const s=St(e),u=h(()=>"q-avatar"+(e.color?` bg-${e.color}`:"")+(e.textColor?` text-${e.textColor} q-chip--colored`:"")+(e.square===!0?" q-avatar--square":e.rounded===!0?" rounded-borders":"")),r=h(()=>e.fontSize?{fontSize:e.fontSize}:null);return()=>{const a=e.icon!==void 0?[k(ae,{name:e.icon})]:void 0;return k("div",{class:u.value,style:s.value},[k("div",{class:"q-avatar__content row flex-center overflow-hidden",style:r.value},$t(t.default,a))])}}}),K=X({name:"QItemSection",props:{avatar:Boolean,thumbnail:Boolean,side:Boolean,top:Boolean,noWrap:Boolean},setup(e,{slots:t}){const s=h(()=>`q-item__section column q-item__section--${e.avatar===!0||e.side===!0||e.thumbnail===!0?"side":"main"}`+(e.top===!0?" q-item__section--top justify-start":" justify-center")+(e.avatar===!0?" q-item__section--avatar":"")+(e.thumbnail===!0?" q-item__section--thumbnail":"")+(e.noWrap===!0?" q-item__section--nowrap":""));return()=>k("div",{class:s.value},re(t.default))}}),Ye=X({name:"QItem",props:{...Ne,...At,tag:{type:String,default:"div"},active:{type:Boolean,default:null},clickable:Boolean,dense:Boolean,insetLevel:Number,tabindex:[String,Number],focused:Boolean,manualFocus:Boolean},emits:["click","keyup"],setup(e,{slots:t,emit:s}){const{proxy:{$q:u}}=ne(),r=ze(e,u),{hasLink:a,linkAttrs:i,linkClass:v,linkTag:S,navigateOnClick:L}=Lt(),m=A(null),B=A(null),g=h(()=>e.clickable===!0||a.value===!0||e.tag==="label"),b=h(()=>e.disable!==!0&&g.value===!0),x=h(()=>"q-item q-item-type row no-wrap"+(e.dense===!0?" q-item--dense":"")+(r.value===!0?" q-item--dark":"")+(a.value===!0&&e.active===null?v.value:e.active===!0?` q-item--active${e.activeClass!==void 0?` ${e.activeClass}`:""}`:"")+(e.disable===!0?" disabled":"")+(b.value===!0?" q-item--clickable q-link cursor-pointer "+(e.manualFocus===!0?"q-manual-focusable":"q-focusable q-hoverable")+(e.focused===!0?" q-manual-focusable--focused":""):"")),R=h(()=>{if(e.insetLevel===void 0)return null;const o=u.lang.rtl===!0?"Right":"Left";return{["padding"+o]:16+e.insetLevel*56+"px"}});function D(o){b.value===!0&&(B.value!==null&&(o.qKeyEvent!==!0&&document.activeElement===m.value?B.value.focus():document.activeElement===B.value&&m.value.focus()),L(o))}function V(o){if(b.value===!0&&Ve(o,13)===!0){G(o),o.qKeyEvent=!0;const C=new MouseEvent("click",o);C.qKeyEvent=!0,m.value.dispatchEvent(C)}s("keyup",o)}function z(){const o=Bt(t.default,[]);return b.value===!0&&o.unshift(k("div",{class:"q-focus-helper",tabindex:-1,ref:B})),o}return()=>{const o={ref:m,class:x.value,style:R.value,role:"listitem",onClick:D,onKeyup:V};return b.value===!0?(o.tabindex=e.tabindex||"0",Object.assign(o,i.value)):g.value===!0&&(o["aria-disabled"]="true"),k(S.value,o,z())}}}),ra=X({name:"QTabPanels",props:{...ta,...Ne},emits:aa,setup(e,{slots:t}){const s=ne(),u=ze(e,s.proxy.$q),{updatePanelsList:r,getPanelContent:a,panelDirectives:i}=na(),v=h(()=>"q-tab-panels q-panel-parent"+(u.value===!0?" q-tab-panels--dark q-dark":""));return()=>(r(t),Rt("div",{class:v.value},a(),"pan",e.swipeable,()=>i.value))}});const oa={name:"TrackList",props:{items:Array},data(){return{audioSrc:"",currentlyPlaying:null}},methods:{playPreview(e){if(this.currentlyPlaying===e.preview_url){this.$refs.audio.pause(),this.currentlyPlaying=null;return}this.audioSrc=e.preview_url,this.$nextTick(()=>{this.$refs.audio.play(),this.currentlyPlaying=e.preview_url})}}},ia={class:"text-subtitle1 text-weight-medium"},la={class:"text-caption text-grey-7"},sa=["src"];function ua(e,t,s,u,r,a){return U(),ke("div",null,[(U(!0),ke(We,null,Fe(s.items,(i,v)=>(U(),ce(Ue,{class:"q-mb-sm hover-card",key:i.uri,flat:"",bordered:""},{default:q(()=>[y(Ye,null,{default:q(()=>[y(K,{avatar:""},{default:q(()=>[y(He,{color:"indigo","text-color":"white"},{default:q(()=>[Oe(Z(v+1),1)]),_:2},1024)]),_:2},1024),y(K,{avatar:""},{default:q(()=>[y(Ke,{src:i.album.images[2].url,class:"rounded-borders album-img",style:{width:"64px",height:"64px"}},null,8,["src"])]),_:2},1024),y(K,null,{default:q(()=>[te("div",ia,Z(i.name),1),te("div",la,Z(i.artists[0].name),1)]),_:2},1024),y(K,{side:""},{default:q(()=>[i.preview_url?(U(),ce(It,{key:0,round:"",dense:"",color:"primary",icon:"play_arrow",onClick:S=>a.playPreview(i),disable:r.currentlyPlaying===i.preview_url},null,8,["onClick","disable"])):Et("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),te("audio",{ref:"audio",src:r.audioSrc,onEnded:t[0]||(t[0]=i=>r.currentlyPlaying=null)},null,40,sa)])}var ca=je(oa,[["render",ua],["__scopeId","data-v-9456d9ba"]]);const da=Mt({name:"IndexPage",components:{TrackList:ca},setup(){const e=Vt(),t=A("short");return{auth:e,tab:t}},data(){return{short_ranking:[],medium_ranking:[],long_ranking:[],top_artists:[]}},async mounted(){if(!this.auth.accessToken){console.log("No access token found, redirecting to login...",this.auth),this.$router.push("/");return}if(this.auth.isTokenExpired()&&(console.log("Token expired, refreshing...",this.auth),await this.refreshToken(),!this.auth.accessToken)){this.$router.push("/");return}this.getUser(),this.getRankings(),await this.getTopArtists()},methods:{getUser(){this.$axios.get("https://api.spotify.com/v1/me",{headers:{Authorization:`Bearer ${this.auth.accessToken}`}}).then(e=>{this.auth.user=e.data}).catch(e=>{console.error(e)})},getRankings(){["short_term","medium_term","long_term"].forEach(t=>{this.$axios.get("https://api.spotify.com/v1/me/top/tracks",{params:{time_range:t,limit:50},headers:{Authorization:`Bearer ${this.auth.accessToken}`}}).then(s=>{this[`${t.split("_")[0]}_ranking`]=s.data.items}).catch(s=>{console.error(s)})})},async getTopArtists(){const e=await this.$axios.get("https://api.spotify.com/v1/me/top/artists",{params:{time_range:"long_term",limit:50},headers:{Authorization:`Bearer ${this.auth.accessToken}`}});this.top_artists=e.data.items},async refreshToken(){if(!this.auth.refreshToken){this.$router.push("/");return}const e=new URLSearchParams({grant_type:"refresh_token",refresh_token:this.auth.refreshToken,client_id:this.auth.clientId});try{const t=await this.$axios.post("https://accounts.spotify.com/api/token",e,{headers:{"Content-Type":"application/x-www-form-urlencoded"}});console.log("refresh response:",t.data),this.auth.setTokens(t.data.access_token,this.auth.refreshToken,Date.now()+t.data.expires_in*1e3)}catch(t){console.error("Refresh token failed",t),this.auth.logout(),this.$router.push("/")}}}}),va={class:"text-subtitle1"},fa={class:"text-caption text-grey-7"};function ha(e,t,s,u,r,a){const i=Dt("track-list");return U(),ce(Nt,{class:"q-pa-md"},{default:q(()=>[y(Kt,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=v=>e.tab=v),dense:"",class:"text-teal","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:q(()=>[y(se,{name:"short",label:"\u8FD1\u56DB\u5468"}),y(se,{name:"medium",label:"\u8FD1\u534A\u5E74"}),y(se,{name:"long",label:"\u9577\u671F"}),y(se,{name:"artists",label:"\u6700\u611B\u6B4C\u624B"})]),_:1},8,["modelValue"]),y(ra,{modelValue:e.tab,"onUpdate:modelValue":t[1]||(t[1]=v=>e.tab=v),animated:"",swipeable:""},{default:q(()=>[y(ue,{name:"short"},{default:q(()=>[y(i,{items:e.short_ranking},null,8,["items"])]),_:1}),y(ue,{name:"medium"},{default:q(()=>[y(i,{items:e.medium_ranking},null,8,["items"])]),_:1}),y(ue,{name:"long"},{default:q(()=>[y(i,{items:e.long_ranking},null,8,["items"])]),_:1}),y(ue,{name:"artists"},{default:q(()=>[(U(!0),ke(We,null,Fe(e.top_artists,(v,S)=>(U(),ce(Ue,{class:"q-mb-sm hover-card",key:v.id,flat:"",bordered:""},{default:q(()=>[y(Ye,null,{default:q(()=>[y(K,{avatar:""},{default:q(()=>[y(He,{color:"indigo","text-color":"white"},{default:q(()=>[Oe(Z(S+1),1)]),_:2},1024)]),_:2},1024),y(K,{avatar:""},{default:q(()=>{var L;return[y(Ke,{src:(L=v.images[1])==null?void 0:L.url,class:"rounded-borders",style:{width:"64px",height:"64px"}},null,8,["src"])]}),_:2},1024),y(K,null,{default:q(()=>[te("div",va,Z(v.name),1),te("div",fa,Z(v.genres.join(", ")),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1},8,["modelValue"])]),_:1})}var pa=je(da,[["render",ha]]);export{pa as default};
