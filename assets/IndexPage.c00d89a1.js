import{y as ut,z as pe,r as B,d as b,v as Qe,D as ct,W as Ne,X as dt,Y as vt,h as k,Z,$ as ze,a0 as ft,a1 as ae,N as ht,g as ne,a2 as mt,a3 as gt,c as X,a4 as ye,a5 as Ie,s as te,C as bt,a6 as pt,a7 as yt,e as re,a8 as _t,a9 as kt,aa as ee,E as wt,ab as Tt,ac as le,ad as _e,ae as Ee,af as ke,O as Ct,T as qt,ag as xt,ah as Pt,ai as St,aj as $t,ak as At,u as Oe,al as Lt,a as je,am as Bt,S as Rt,an as It,_ as We,o as F,ao as we,l as G,ap as Te,aq as Ue,k as g,w,ar as Fe,j as ce,m as Ke,t as J,Q as Et,n as Dt,as as Xe,U as Vt,V as Mt}from"./index.0539a66b.js";import{Q as Qt,u as Nt}from"./auth.fb0a4226.js";import{a as de,Q as zt}from"./QPage.80f03595.js";let Ot=0;const jt=["click","keydown"],Wt={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${Ot++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function Ut(e,t,s,u){const o=ut(Ne,pe);if(o===pe)return console.error("QTab/QRouteTab component needs to be child of QTabs"),pe;const{proxy:a}=ne(),r=B(null),c=B(null),S=B(null),$=b(()=>e.disable===!0||e.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},e.ripple===!0?{}:e.ripple)),h=b(()=>o.currentModel.value===e.name),T=b(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(h.value===!0?" q-tab--active"+(o.tabProps.value.activeClass?" "+o.tabProps.value.activeClass:"")+(o.tabProps.value.activeColor?` text-${o.tabProps.value.activeColor}`:"")+(o.tabProps.value.activeBgColor?` bg-${o.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(e.icon&&e.label&&o.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(e.noCaps===!0||o.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(e.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")+(u!==void 0?u.linkClass.value:"")),f=b(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(o.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(e.contentClass!==void 0?` ${e.contentClass}`:"")),p=b(()=>e.disable===!0||o.hasFocus.value===!0||h.value===!1&&o.hasActiveTab.value===!0?-1:e.tabindex||0);function P(i,x){if(x!==!0&&r.value!==null&&r.value.focus(),e.disable===!0){u!==void 0&&u.hasRouterLink.value===!0&&Z(i);return}if(u===void 0){o.updateModel({name:e.name}),s("click",i);return}if(u.hasRouterLink.value===!0){const E=(A={})=>{let L;const M=A.to===void 0||mt(A.to,e.to)===!0?o.avoidRouteWatcher=gt():null;return u.navigateToRouterLink(i,{...A,returnRouterError:!0}).catch(N=>{L=N}).then(N=>{if(M===o.avoidRouteWatcher&&(o.avoidRouteWatcher=!1,L===void 0&&(N===void 0||N.message.startsWith("Avoided redundant navigation")===!0)&&o.updateModel({name:e.name})),A.returnRouterError===!0)return L!==void 0?Promise.reject(L):N})};s("click",i,E),i.defaultPrevented!==!0&&E();return}s("click",i)}function R(i){ze(i,[13,32])?P(i,!0):ft(i)!==!0&&i.keyCode>=35&&i.keyCode<=40&&i.altKey!==!0&&i.metaKey!==!0&&o.onKbdNavigate(i.keyCode,a.$el)===!0&&Z(i),s("keydown",i)}function V(){const i=o.tabProps.value.narrowIndicator,x=[],E=k("div",{ref:S,class:["q-tab__indicator",o.tabProps.value.indicatorClass]});e.icon!==void 0&&x.push(k(ae,{class:"q-tab__icon",name:e.icon})),e.label!==void 0&&x.push(k("div",{class:"q-tab__label"},e.label)),e.alert!==!1&&x.push(e.alertIcon!==void 0?k(ae,{class:"q-tab__alert-icon",color:e.alert!==!0?e.alert:void 0,name:e.alertIcon}):k("div",{class:"q-tab__alert"+(e.alert!==!0?` text-${e.alert}`:"")})),i===!0&&x.push(E);const A=[k("div",{class:"q-focus-helper",tabindex:-1,ref:r}),k("div",{class:f.value},ht(t.default,x))];return i===!1&&A.push(E),A}const Q={name:b(()=>e.name),rootRef:c,tabIndicatorRef:S,routeData:u};Qe(()=>{o.unregisterTab(Q)}),ct(()=>{o.registerTab(Q)});function z(i,x){const E={ref:c,class:T.value,tabindex:p.value,role:"tab","aria-selected":h.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:P,onKeydown:R,...x};return dt(k(i,E,V()),[[vt,$.value]])}return{renderTab:z,$tabs:o}}var se=X({name:"QTab",props:Wt,emits:jt,setup(e,{slots:t,emit:s}){const{renderTab:u}=Ut(e,t,s);return()=>u("div")}});let He=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const t=document.createElement("div");Object.assign(t.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(t),e.scrollLeft=-1e3,He=e.scrollLeft>=0,e.remove()}function Ft(e,t,s){const u=s===!0?["left","right"]:["top","bottom"];return`absolute-${t===!0?u[0]:u[1]}${e?` text-${e}`:""}`}const Kt=["left","center","right","justify"];var Xt=X({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:e=>Kt.includes(e)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(e,{slots:t,emit:s}){const{proxy:u}=ne(),{$q:o}=u,{registerTick:a}=ye(),{registerTick:r}=ye(),{registerTick:c}=ye(),{registerTimeout:S,removeTimeout:$}=Ie(),{registerTimeout:h,removeTimeout:T}=Ie(),f=B(null),p=B(null),P=B(e.modelValue),R=B(!1),V=B(!0),Q=B(!1),z=B(!1),i=[],x=B(0),E=B(!1);let A=null,L=null,M;const N=b(()=>({activeClass:e.activeClass,activeColor:e.activeColor,activeBgColor:e.activeBgColor,indicatorClass:Ft(e.indicatorColor,e.switchIndicator,e.vertical),narrowIndicator:e.narrowIndicator,inlineLabel:e.inlineLabel,noCaps:e.noCaps})),ve=b(()=>{const n=x.value,l=P.value;for(let d=0;d<n;d++)if(i[d].name.value===l)return!0;return!1}),fe=b(()=>`q-tabs__content--align-${R.value===!0?"left":z.value===!0?"justify":e.align}`),he=b(()=>`q-tabs row no-wrap items-center q-tabs--${R.value===!0?"":"not-"}scrollable q-tabs--${e.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${e.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${e.mobileArrows===!0?"":"out"}-arrows`+(e.dense===!0?" q-tabs--dense":"")+(e.shrink===!0?" col-shrink":"")+(e.stretch===!0?" self-stretch":"")),v=b(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+fe.value+(e.contentClass!==void 0?` ${e.contentClass}`:"")),_=b(()=>e.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),D=b(()=>e.vertical!==!0&&o.lang.rtl===!0),j=b(()=>He===!1&&D.value===!0);te(D,Y),te(()=>e.modelValue,n=>{me({name:n,setCurrent:!0,skipEmit:!0})}),te(()=>e.outsideArrows,oe);function me({name:n,setCurrent:l,skipEmit:d}){P.value!==n&&(d!==!0&&e["onUpdate:modelValue"]!==void 0&&s("update:modelValue",n),(l===!0||e["onUpdate:modelValue"]===void 0)&&(Ze(P.value,n),P.value=n))}function oe(){a(()=>{qe({width:f.value.offsetWidth,height:f.value.offsetHeight})})}function qe(n){if(_.value===void 0||p.value===null)return;const l=n[_.value.container],d=Math.min(p.value[_.value.scroll],Array.prototype.reduce.call(p.value.children,(q,y)=>q+(y[_.value.content]||0),0)),C=l>0&&d>l;R.value=C,C===!0&&r(Y),z.value=l<parseInt(e.breakpoint,10)}function Ze(n,l){const d=n!=null&&n!==""?i.find(q=>q.name.value===n):null,C=l!=null&&l!==""?i.find(q=>q.name.value===l):null;if(d&&C){const q=d.tabIndicatorRef.value,y=C.tabIndicatorRef.value;A!==null&&(clearTimeout(A),A=null),q.style.transition="none",q.style.transform="none",y.style.transition="none",y.style.transform="none";const m=q.getBoundingClientRect(),I=y.getBoundingClientRect();y.style.transform=e.vertical===!0?`translate3d(0,${m.top-I.top}px,0) scale3d(1,${I.height?m.height/I.height:1},1)`:`translate3d(${m.left-I.left}px,0,0) scale3d(${I.width?m.width/I.width:1},1,1)`,c(()=>{A=setTimeout(()=>{A=null,y.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",y.style.transform="none"},70)})}C&&R.value===!0&&H(C.rootRef.value)}function H(n){const{left:l,width:d,top:C,height:q}=p.value.getBoundingClientRect(),y=n.getBoundingClientRect();let m=e.vertical===!0?y.top-C:y.left-l;if(m<0){p.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(m),Y();return}m+=e.vertical===!0?y.height-q:y.width-d,m>0&&(p.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(m),Y())}function Y(){const n=p.value;if(n===null)return;const l=n.getBoundingClientRect(),d=e.vertical===!0?n.scrollTop:Math.abs(n.scrollLeft);D.value===!0?(V.value=Math.ceil(d+l.width)<n.scrollWidth-1,Q.value=d>0):(V.value=d>0,Q.value=e.vertical===!0?Math.ceil(d+l.height)<n.scrollHeight:Math.ceil(d+l.width)<n.scrollWidth)}function xe(n){L!==null&&clearInterval(L),L=setInterval(()=>{tt(n)===!0&&W()},5)}function Pe(){xe(j.value===!0?Number.MAX_SAFE_INTEGER:0)}function Se(){xe(j.value===!0?0:Number.MAX_SAFE_INTEGER)}function W(){L!==null&&(clearInterval(L),L=null)}function Je(n,l){const d=Array.prototype.filter.call(p.value.children,I=>I===l||I.matches&&I.matches(".q-tab.q-focusable")===!0),C=d.length;if(C===0)return;if(n===36)return H(d[0]),d[0].focus(),!0;if(n===35)return H(d[C-1]),d[C-1].focus(),!0;const q=n===(e.vertical===!0?38:37),y=n===(e.vertical===!0?40:39),m=q===!0?-1:y===!0?1:void 0;if(m!==void 0){const I=D.value===!0?-1:1,O=d.indexOf(l)+m*I;return O>=0&&O<C&&(H(d[O]),d[O].focus({preventScroll:!0})),!0}}const et=b(()=>j.value===!0?{get:n=>Math.abs(n.scrollLeft),set:(n,l)=>{n.scrollLeft=-l}}:e.vertical===!0?{get:n=>n.scrollTop,set:(n,l)=>{n.scrollTop=l}}:{get:n=>n.scrollLeft,set:(n,l)=>{n.scrollLeft=l}});function tt(n){const l=p.value,{get:d,set:C}=et.value;let q=!1,y=d(l);const m=n<y?-1:1;return y+=m*5,y<0?(q=!0,y=0):(m===-1&&y<=n||m===1&&y>=n)&&(q=!0,y=n),C(l,y),Y(),q}function $e(n,l){for(const d in n)if(n[d]!==l[d])return!1;return!0}function at(){let n=null,l={matchedLen:0,queryDiff:9999,hrefLen:0};const d=i.filter(m=>m.routeData!==void 0&&m.routeData.hasRouterLink.value===!0),{hash:C,query:q}=u.$route,y=Object.keys(q).length;for(const m of d){const I=m.routeData.exact.value===!0;if(m.routeData[I===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:O,query:ge,matched:lt,href:st}=m.routeData.resolvedLink.value,be=Object.keys(ge).length;if(I===!0){if(O!==C||be!==y||$e(q,ge)===!1)continue;n=m.name.value;break}if(O!==""&&O!==C||be!==0&&$e(ge,q)===!1)continue;const U={matchedLen:lt.length,queryDiff:y-be,hrefLen:st.length-O.length};if(U.matchedLen>l.matchedLen){n=m.name.value,l=U;continue}else if(U.matchedLen!==l.matchedLen)continue;if(U.queryDiff<l.queryDiff)n=m.name.value,l=U;else if(U.queryDiff!==l.queryDiff)continue;U.hrefLen>l.hrefLen&&(n=m.name.value,l=U)}n===null&&i.some(m=>m.routeData===void 0&&m.name.value===P.value)===!0||me({name:n,setCurrent:!0})}function nt(n){if($(),E.value!==!0&&f.value!==null&&n.target&&typeof n.target.closest=="function"){const l=n.target.closest(".q-tab");l&&f.value.contains(l)===!0&&(E.value=!0,R.value===!0&&H(l))}}function rt(){S(()=>{E.value=!1},30)}function ie(){Le.avoidRouteWatcher===!1?h(at):T()}function Ae(){if(M===void 0){const n=te(()=>u.$route.fullPath,ie);M=()=>{n(),M=void 0}}}function ot(n){i.push(n),x.value++,oe(),n.routeData===void 0||u.$route===void 0?h(()=>{if(R.value===!0){const l=P.value,d=l!=null&&l!==""?i.find(C=>C.name.value===l):null;d&&H(d.rootRef.value)}}):(Ae(),n.routeData.hasRouterLink.value===!0&&ie())}function it(n){i.splice(i.indexOf(n),1),x.value--,oe(),M!==void 0&&n.routeData!==void 0&&(i.every(l=>l.routeData===void 0)===!0&&M(),ie())}const Le={currentModel:P,tabProps:N,hasFocus:E,hasActiveTab:ve,registerTab:ot,unregisterTab:it,verifyRouteModel:ie,updateModel:me,onKbdNavigate:Je,avoidRouteWatcher:!1};bt(Ne,Le);function Be(){A!==null&&clearTimeout(A),W(),M!==void 0&&M()}let Re;return Qe(Be),pt(()=>{Re=M!==void 0,Be()}),yt(()=>{Re===!0&&Ae(),oe()}),()=>k("div",{ref:f,class:he.value,role:"tablist",onFocusin:nt,onFocusout:rt},[k(Qt,{onResize:qe}),k("div",{ref:p,class:v.value,onScroll:Y},re(t.default)),k(ae,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(V.value===!0?"":" q-tabs__arrow--faded"),name:e.leftIcon||o.iconSet.tabs[e.vertical===!0?"up":"left"],onMousedownPassive:Pe,onTouchstartPassive:Pe,onMouseupPassive:W,onMouseleavePassive:W,onTouchendPassive:W}),k(ae,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(Q.value===!0?"":" q-tabs__arrow--faded"),name:e.rightIcon||o.iconSet.tabs[e.vertical===!0?"down":"right"],onMousedownPassive:Se,onTouchstartPassive:Se,onMouseupPassive:W,onMouseleavePassive:W,onTouchendPassive:W})])}});const Ce={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},Ht=Object.keys(Ce);Ce.all=!0;function De(e){const t={};for(const s of Ht)e[s]===!0&&(t[s]=!0);return Object.keys(t).length===0?Ce:(t.horizontal===!0?t.left=t.right=!0:t.left===!0&&t.right===!0&&(t.horizontal=!0),t.vertical===!0?t.up=t.down=!0:t.up===!0&&t.down===!0&&(t.vertical=!0),t.horizontal===!0&&t.vertical===!0&&(t.all=!0),t)}const Yt=["INPUT","TEXTAREA"];function Ve(e,t){return t.event===void 0&&e.target!==void 0&&e.target.draggable!==!0&&typeof t.handler=="function"&&Yt.includes(e.target.nodeName.toUpperCase())===!1&&(e.qClonedBy===void 0||e.qClonedBy.indexOf(t.uid)===-1)}function Gt(){if(window.getSelection!==void 0){const e=window.getSelection();e.empty!==void 0?e.empty():e.removeAllRanges!==void 0&&(e.removeAllRanges(),_t.is.mobile!==!0&&e.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}function Zt(e){const t=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((s,u)=>{const o=parseFloat(s);o&&(t[u]=o)}),t}var Jt=kt({name:"touch-swipe",beforeMount(e,{value:t,arg:s,modifiers:u}){if(u.mouse!==!0&&ee.has.touch!==!0)return;const o=u.mouseCapture===!0?"Capture":"",a={handler:t,sensitivity:Zt(s),direction:De(u),noop:wt,mouseStart(r){Ve(r,a)&&Tt(r)&&(le(a,"temp",[[document,"mousemove","move",`notPassive${o}`],[document,"mouseup","end","notPassiveCapture"]]),a.start(r,!0))},touchStart(r){if(Ve(r,a)){const c=r.target;le(a,"temp",[[c,"touchmove","move","notPassiveCapture"],[c,"touchcancel","end","notPassiveCapture"],[c,"touchend","end","notPassiveCapture"]]),a.start(r)}},start(r,c){ee.is.firefox===!0&&_e(e,!0);const S=Ee(r);a.event={x:S.left,y:S.top,time:Date.now(),mouse:c===!0,dir:!1}},move(r){if(a.event===void 0)return;if(a.event.dir!==!1){Z(r);return}const c=Date.now()-a.event.time;if(c===0)return;const S=Ee(r),$=S.left-a.event.x,h=Math.abs($),T=S.top-a.event.y,f=Math.abs(T);if(a.event.mouse!==!0){if(h<a.sensitivity[1]&&f<a.sensitivity[1]){a.end(r);return}}else if(window.getSelection().toString()!==""){a.end(r);return}else if(h<a.sensitivity[2]&&f<a.sensitivity[2])return;const p=h/c,P=f/c;a.direction.vertical===!0&&h<f&&h<100&&P>a.sensitivity[0]&&(a.event.dir=T<0?"up":"down"),a.direction.horizontal===!0&&h>f&&f<100&&p>a.sensitivity[0]&&(a.event.dir=$<0?"left":"right"),a.direction.up===!0&&h<f&&T<0&&h<100&&P>a.sensitivity[0]&&(a.event.dir="up"),a.direction.down===!0&&h<f&&T>0&&h<100&&P>a.sensitivity[0]&&(a.event.dir="down"),a.direction.left===!0&&h>f&&$<0&&f<100&&p>a.sensitivity[0]&&(a.event.dir="left"),a.direction.right===!0&&h>f&&$>0&&f<100&&p>a.sensitivity[0]&&(a.event.dir="right"),a.event.dir!==!1?(Z(r),a.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Gt(),a.styleCleanup=R=>{a.styleCleanup=void 0,document.body.classList.remove("non-selectable");const V=()=>{document.body.classList.remove("no-pointer-events--children")};R===!0?setTimeout(V,50):V()}),a.handler({evt:r,touch:a.event.mouse!==!0,mouse:a.event.mouse,direction:a.event.dir,duration:c,distance:{x:h,y:f}})):a.end(r)},end(r){a.event!==void 0&&(ke(a,"temp"),ee.is.firefox===!0&&_e(e,!1),a.styleCleanup!==void 0&&a.styleCleanup(!0),r!==void 0&&a.event.dir!==!1&&Z(r),a.event=void 0)}};if(e.__qtouchswipe=a,u.mouse===!0){const r=u.mouseCapture===!0||u.mousecapture===!0?"Capture":"";le(a,"main",[[e,"mousedown","mouseStart",`passive${r}`]])}ee.has.touch===!0&&le(a,"main",[[e,"touchstart","touchStart",`passive${u.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,t){const s=e.__qtouchswipe;s!==void 0&&(t.oldValue!==t.value&&(typeof t.value!="function"&&s.end(),s.handler=t.value),s.direction=De(t.modifiers))},beforeUnmount(e){const t=e.__qtouchswipe;t!==void 0&&(ke(t,"main"),ke(t,"temp"),ee.is.firefox===!0&&_e(e,!1),t.styleCleanup!==void 0&&t.styleCleanup(),delete e.__qtouchswipe)}});function ea(){const e=new Map;return{getCache:function(t,s){return e[t]===void 0?e[t]=s:e[t]},getCacheWithFn:function(t,s){return e[t]===void 0?e[t]=s():e[t]}}}const ta={name:{required:!0},disable:Boolean},Me={setup(e,{slots:t}){return()=>k("div",{class:"q-panel scroll",role:"tabpanel"},re(t.default))}},aa={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},na=["update:modelValue","beforeTransition","transition"];function ra(){const{props:e,emit:t,proxy:s}=ne(),{getCacheWithFn:u}=ea();let o,a;const r=B(null),c=B(null);function S(v){const _=e.vertical===!0?"up":"left";L((s.$q.lang.rtl===!0?-1:1)*(v.direction===_?1:-1))}const $=b(()=>[[Jt,S,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),h=b(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),T=b(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),f=b(()=>`--q-transition-duration: ${e.transitionDuration}ms`),p=b(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),P=b(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),R=b(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);te(()=>e.modelValue,(v,_)=>{const D=i(v)===!0?x(v):-1;a!==!0&&A(D===-1?0:D<x(_)?-1:1),r.value!==D&&(r.value=D,t("beforeTransition",v,_),Ct(()=>{t("transition",v,_)}))});function V(){L(1)}function Q(){L(-1)}function z(v){t("update:modelValue",v)}function i(v){return v!=null&&v!==""}function x(v){return o.findIndex(_=>_.props.name===v&&_.props.disable!==""&&_.props.disable!==!0)}function E(){return o.filter(v=>v.props.disable!==""&&v.props.disable!==!0)}function A(v){const _=v!==0&&e.animated===!0&&r.value!==-1?"q-transition--"+(v===-1?h.value:T.value):null;c.value!==_&&(c.value=_)}function L(v,_=r.value){let D=_+v;for(;D>-1&&D<o.length;){const j=o[D];if(j!==void 0&&j.props.disable!==""&&j.props.disable!==!0){A(v),a=!0,t("update:modelValue",j.props.name),setTimeout(()=>{a=!1});return}D+=v}e.infinite===!0&&o.length!==0&&_!==-1&&_!==o.length&&L(v,v===-1?o.length:-1)}function M(){const v=x(e.modelValue);return r.value!==v&&(r.value=v),!0}function N(){const v=i(e.modelValue)===!0&&M()&&o[r.value];return e.keepAlive===!0?[k(Pt,P.value,[k(R.value===!0?u(p.value,()=>({...Me,name:p.value})):Me,{key:p.value,style:f.value},()=>v)])]:[k("div",{class:"q-panel scroll",style:f.value,key:p.value,role:"tabpanel"},[v])]}function ve(){if(o.length!==0)return e.animated===!0?[k(qt,{name:c.value},N)]:N()}function fe(v){return o=xt(re(v.default,[])).filter(_=>_.props!==null&&_.props.slot===void 0&&i(_.props.name)===!0),o.length}function he(){return o}return Object.assign(s,{next:V,previous:Q,goTo:z}),{panelIndex:r,panelDirectives:$,updatePanelsList:fe,updatePanelIndex:M,getPanelContent:ve,getEnabledPanels:E,getPanels:he,isValidPanelName:i,keepAliveProps:P,needsUniqueKeepAliveWrapper:R,goToPanelByOffset:L,goToPanel:z,nextPanel:V,previousPanel:Q}}var ue=X({name:"QTabPanel",props:ta,setup(e,{slots:t}){return()=>k("div",{class:"q-tab-panel",role:"tabpanel"},re(t.default))}}),Ye=X({name:"QAvatar",props:{...St,fontSize:String,color:String,textColor:String,icon:String,square:Boolean,rounded:Boolean},setup(e,{slots:t}){const s=$t(e),u=b(()=>"q-avatar"+(e.color?` bg-${e.color}`:"")+(e.textColor?` text-${e.textColor} q-chip--colored`:"")+(e.square===!0?" q-avatar--square":e.rounded===!0?" rounded-borders":"")),o=b(()=>e.fontSize?{fontSize:e.fontSize}:null);return()=>{const a=e.icon!==void 0?[k(ae,{name:e.icon})]:void 0;return k("div",{class:u.value,style:s.value},[k("div",{class:"q-avatar__content row flex-center overflow-hidden",style:o.value},At(t.default,a))])}}}),K=X({name:"QItemSection",props:{avatar:Boolean,thumbnail:Boolean,side:Boolean,top:Boolean,noWrap:Boolean},setup(e,{slots:t}){const s=b(()=>`q-item__section column q-item__section--${e.avatar===!0||e.side===!0||e.thumbnail===!0?"side":"main"}`+(e.top===!0?" q-item__section--top justify-start":" justify-center")+(e.avatar===!0?" q-item__section--avatar":"")+(e.thumbnail===!0?" q-item__section--thumbnail":"")+(e.noWrap===!0?" q-item__section--nowrap":""));return()=>k("div",{class:s.value},re(t.default))}}),Ge=X({name:"QItem",props:{...Oe,...Lt,tag:{type:String,default:"div"},active:{type:Boolean,default:null},clickable:Boolean,dense:Boolean,insetLevel:Number,tabindex:[String,Number],focused:Boolean,manualFocus:Boolean},emits:["click","keyup"],setup(e,{slots:t,emit:s}){const{proxy:{$q:u}}=ne(),o=je(e,u),{hasLink:a,linkAttrs:r,linkClass:c,linkTag:S,navigateOnClick:$}=Bt(),h=B(null),T=B(null),f=b(()=>e.clickable===!0||a.value===!0||e.tag==="label"),p=b(()=>e.disable!==!0&&f.value===!0),P=b(()=>"q-item q-item-type row no-wrap"+(e.dense===!0?" q-item--dense":"")+(o.value===!0?" q-item--dark":"")+(a.value===!0&&e.active===null?c.value:e.active===!0?` q-item--active${e.activeClass!==void 0?` ${e.activeClass}`:""}`:"")+(e.disable===!0?" disabled":"")+(p.value===!0?" q-item--clickable q-link cursor-pointer "+(e.manualFocus===!0?"q-manual-focusable":"q-focusable q-hoverable")+(e.focused===!0?" q-manual-focusable--focused":""):"")),R=b(()=>{if(e.insetLevel===void 0)return null;const i=u.lang.rtl===!0?"Right":"Left";return{["padding"+i]:16+e.insetLevel*56+"px"}});function V(i){p.value===!0&&(T.value!==null&&(i.qKeyEvent!==!0&&document.activeElement===h.value?T.value.focus():document.activeElement===T.value&&h.value.focus()),$(i))}function Q(i){if(p.value===!0&&ze(i,13)===!0){Z(i),i.qKeyEvent=!0;const x=new MouseEvent("click",i);x.qKeyEvent=!0,h.value.dispatchEvent(x)}s("keyup",i)}function z(){const i=Rt(t.default,[]);return p.value===!0&&i.unshift(k("div",{class:"q-focus-helper",tabindex:-1,ref:T})),i}return()=>{const i={ref:h,class:P.value,style:R.value,role:"listitem",onClick:V,onKeyup:Q};return p.value===!0?(i.tabindex=e.tabindex||"0",Object.assign(i,r.value)):f.value===!0&&(i["aria-disabled"]="true"),k(S.value,i,z())}}}),oa=X({name:"QTabPanels",props:{...aa,...Oe},emits:na,setup(e,{slots:t}){const s=ne(),u=je(e,s.proxy.$q),{updatePanelsList:o,getPanelContent:a,panelDirectives:r}=ra(),c=b(()=>"q-tab-panels q-panel-parent"+(u.value===!0?" q-tab-panels--dark q-dark":""));return()=>(o(t),It("div",{class:c.value},a(),"pan",e.swipeable,()=>r.value))}});const ia={name:"TrackList",props:{items:Array},data(){return{audioSrc:"",currentlyPlaying:null}},methods:{playPreview(e){if(this.currentlyPlaying===e.preview_url){this.$refs.audio.pause(),this.currentlyPlaying=null;return}this.audioSrc=e.preview_url,this.$nextTick(()=>{this.$refs.audio.play(),this.currentlyPlaying=e.preview_url})},openDialog(e){this.dialogImage=e,this.dialogOpen=!0}}},la={class:"text-subtitle1 text-weight-medium"},sa={class:"text-caption text-grey-7"},ua=["src"];function ca(e,t,s,u,o,a){return F(),we(Te,null,[G("div",null,[(F(!0),we(Te,null,Ue(s.items,(r,c)=>(F(),ce(Xe,{class:"q-mb-sm hover-card",key:r.uri,flat:"",bordered:""},{default:w(()=>[g(Ge,null,{default:w(()=>[g(K,{avatar:""},{default:w(()=>[g(Ye,{color:"primary","text-color":"white"},{default:w(()=>[Ke(J(c+1),1)]),_:2},1024)]),_:2},1024),g(K,{avatar:""},{default:w(()=>[g(de,{src:r.album.images[2].url,class:"rounded-borders album-img",style:{width:"64px",height:"64px"},onClick:S=>{var $,h,T,f;return a.openDialog(((h=($=r.album)==null?void 0:$.images[0])==null?void 0:h.url)||((f=(T=r.images)==null?void 0:T[0])==null?void 0:f.url))}},null,8,["src","onClick"])]),_:2},1024),g(K,null,{default:w(()=>[G("div",la,J(r.name),1),G("div",sa,J(r.artists[0].name),1)]),_:2},1024),g(K,{side:""},{default:w(()=>[r.preview_url?(F(),ce(Et,{key:0,round:"",dense:"",color:"primary",icon:"play_arrow",onClick:S=>a.playPreview(r),disable:o.currentlyPlaying===r.preview_url},null,8,["onClick","disable"])):Dt("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),G("audio",{ref:"audio",src:o.audioSrc,onEnded:t[0]||(t[0]=r=>o.currentlyPlaying=null)},null,40,ua)]),g(Fe,{modelValue:e.dialogOpen,"onUpdate:modelValue":t[1]||(t[1]=r=>e.dialogOpen=r)},{default:w(()=>[g(de,{src:e.dialogImage,style:{"max-width":"90vw","max-height":"90vh"}},null,8,["src"])]),_:1},8,["modelValue"])],64)}var da=We(ia,[["render",ca],["__scopeId","data-v-3b65de82"]]);const va=Vt({name:"IndexPage",components:{TrackList:da},setup(){const e=Nt(),t=B("short");return{auth:e,tab:t}},data(){return{short_ranking:[],medium_ranking:[],long_ranking:[],top_artists:[]}},async mounted(){if(!this.auth.accessToken){console.log("No access token found, redirecting to login...",this.auth),this.$router.push("/");return}if(this.auth.isTokenExpired()&&(console.log("Token expired, refreshing...",this.auth),await this.refreshToken(),!this.auth.accessToken)){this.$router.push("/");return}this.getUser(),this.getRankings(),await this.getTopArtists()},methods:{getUser(){this.$axios.get("https://api.spotify.com/v1/me",{headers:{Authorization:`Bearer ${this.auth.accessToken}`}}).then(e=>{this.auth.user=e.data}).catch(e=>{console.error(e)})},getRankings(){["short_term","medium_term","long_term"].forEach(t=>{this.$axios.get("https://api.spotify.com/v1/me/top/tracks",{params:{time_range:t,limit:50},headers:{Authorization:`Bearer ${this.auth.accessToken}`}}).then(s=>{this[`${t.split("_")[0]}_ranking`]=s.data.items}).catch(s=>{console.error(s)})})},async getTopArtists(){const e=await this.$axios.get("https://api.spotify.com/v1/me/top/artists",{params:{time_range:"long_term",limit:50},headers:{Authorization:`Bearer ${this.auth.accessToken}`}});this.top_artists=e.data.items},async refreshToken(){if(!this.auth.refreshToken){this.$router.push("/");return}const e=new URLSearchParams({grant_type:"refresh_token",refresh_token:this.auth.refreshToken,client_id:this.auth.clientId});try{const t=await this.$axios.post("https://accounts.spotify.com/api/token",e,{headers:{"Content-Type":"application/x-www-form-urlencoded"}});console.log("refresh response:",t.data),this.auth.setTokens(t.data.access_token,this.auth.refreshToken,Date.now()+t.data.expires_in*1e3)}catch(t){console.error("Refresh token failed",t),this.auth.logout(),this.$router.push("/")}},openDialog(e){this.dialogImage=e,this.dialogOpen=!0}}}),fa={class:"text-subtitle1"},ha={class:"text-caption text-grey-7"};function ma(e,t,s,u,o,a){const r=Mt("track-list");return F(),ce(zt,{class:"q-pa-md"},{default:w(()=>[g(Xt,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=c=>e.tab=c),dense:"",class:"text-teal","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:w(()=>[g(se,{name:"short",label:"\u8FD1\u56DB\u5468"}),g(se,{name:"medium",label:"\u8FD1\u534A\u5E74"}),g(se,{name:"long",label:"\u9577\u671F"}),g(se,{name:"artists",label:"\u6700\u611B\u6B4C\u624B"})]),_:1},8,["modelValue"]),g(oa,{modelValue:e.tab,"onUpdate:modelValue":t[1]||(t[1]=c=>e.tab=c),animated:"",swipeable:""},{default:w(()=>[g(ue,{name:"short"},{default:w(()=>[g(r,{items:e.short_ranking},null,8,["items"])]),_:1}),g(ue,{name:"medium"},{default:w(()=>[g(r,{items:e.medium_ranking},null,8,["items"])]),_:1}),g(ue,{name:"long"},{default:w(()=>[g(r,{items:e.long_ranking},null,8,["items"])]),_:1}),g(ue,{name:"artists"},{default:w(()=>[(F(!0),we(Te,null,Ue(e.top_artists,(c,S)=>(F(),ce(Xe,{class:"q-mb-sm hover-card",key:c.id,flat:"",bordered:""},{default:w(()=>[g(Ge,null,{default:w(()=>[g(K,{avatar:""},{default:w(()=>[g(Ye,{color:"primary","text-color":"white"},{default:w(()=>[Ke(J(S+1),1)]),_:2},1024)]),_:2},1024),g(K,{avatar:""},{default:w(()=>{var $;return[g(de,{src:($=c.images[1])==null?void 0:$.url,class:"rounded-borders",style:{width:"64px",height:"64px"},onClick:h=>{var T,f;return e.openDialog(((T=c.images[0])==null?void 0:T.url)||((f=c.images[1])==null?void 0:f.url))}},null,8,["src","onClick"])]}),_:2},1024),g(K,null,{default:w(()=>[G("div",fa,J(c.name),1),G("div",ha,J(c.genres.join(", ")),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1},8,["modelValue"]),g(Fe,{modelValue:e.dialogOpen,"onUpdate:modelValue":t[2]||(t[2]=c=>e.dialogOpen=c)},{default:w(()=>[g(de,{src:e.dialogImage,style:{"max-width":"90vw","max-height":"90vh"}},null,8,["src"])]),_:1},8,["modelValue"])]),_:1})}var ya=We(va,[["render",ma]]);export{ya as default};
