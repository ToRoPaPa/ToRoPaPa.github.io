import{r as b,E as _,C as f,m as p,D as y,H as h,h as k,g as x,t as m,I}from"./index.8dd40af7.js";import{c as S}from"./dom.bb16bdf6.js";function w(){const r=b(!_.value);return r.value===!1&&f(()=>{r.value=!0}),r}const g=typeof ResizeObserver!="undefined",v=g===!0?{}:{style:"display:block;position:absolute;top:0;left:0;right:0;bottom:0;height:100%;width:100%;overflow:hidden;pointer-events:none;z-index:-1;",url:"about:blank"};var E=S({name:"QResizeObserver",props:{debounce:{type:[String,Number],default:100}},emits:["resize"],setup(r,{emit:s}){let e=null,o,n={width:-1,height:-1};function a(t){t===!0||r.debounce===0||r.debounce==="0"?l():e===null&&(e=setTimeout(l,r.debounce))}function l(){if(e!==null&&(clearTimeout(e),e=null),o){const{offsetWidth:t,offsetHeight:i}=o;(t!==n.width||i!==n.height)&&(n={width:t,height:i},s("resize",n))}}const{proxy:u}=x();if(g===!0){let t;const i=c=>{o=u.$el.parentNode,o?(t=new ResizeObserver(a),t.observe(o),l()):c!==!0&&h(()=>{i(!0)})};return f(()=>{i()}),p(()=>{e!==null&&clearTimeout(e),t!==void 0&&(t.disconnect!==void 0?t.disconnect():o&&t.unobserve(o))}),y}else{let c=function(){e!==null&&(clearTimeout(e),e=null),i!==void 0&&(i.removeEventListener!==void 0&&i.removeEventListener("resize",a,m.passive),i=void 0)},d=function(){c(),o&&o.contentDocument&&(i=o.contentDocument.defaultView,i.addEventListener("resize",a,m.passive),l())};const t=w();let i;return f(()=>{h(()=>{o=u.$el,o&&d()})}),p(c),u.trigger=a,()=>{if(t.value===!0)return k("object",{style:v.style,tabindex:-1,type:"text/html",data:v.url,"aria-hidden":"true",onLoad:d})}}}});const z=I("auth",{state:()=>({clientId:"8553baf8e8d84e2ebaaadce225fdeee8",redirectUri:window.location.origin,code:"",code_verifier:"",accessToken:localStorage.getItem("spotify_access_token")||"",refreshToken:localStorage.getItem("spotify_refresh_token")||"",expiresAt:parseInt(localStorage.getItem("spotify_expires_at")||"0"),user:{}}),getters:{},actions:{setTokens(r,s,e){this.accessToken=r,this.refreshToken=s,this.expiresAt=e,localStorage.setItem("spotify_access_token",r),localStorage.setItem("spotify_refresh_token",s),localStorage.setItem("spotify_expires_at",String(e))},logout(){this.accessToken="",this.refreshToken="",this.expiresAt=0,localStorage.removeItem("spotify_access_token"),localStorage.removeItem("spotify_refresh_token"),localStorage.removeItem("spotify_expires_at")},isTokenExpired(){return Date.now()>this.expiresAt}},persist:!0});var O=z;export{E as Q,O as u};
