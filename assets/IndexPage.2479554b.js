import{p as nt,q as ve,F as S,d as h,z as ke,y as at,S as ze,T as it,U as rt,h as g,V as G,W as De,X as lt,Y as te,K as ot,g as ne,Z as ut,$ as st,c as U,a0 as fe,a1 as Ae,x as Y,v as ct,a2 as dt,a3 as vt,e as Z,a4 as ft,a5 as ht,a6 as J,A as mt,a7 as gt,a8 as re,a9 as he,aa as Le,ab as me,L as bt,ac as Qe,ad as yt,ae as pt,u as Ve,a as je,af as _t,ag as kt,ah as wt,ai as St,aj as Tt,ak as qt,al as Ct,N as Pt,_ as Fe,o as ee,am as Ie,an as xt,ao as $t,l as ge,j as _e,w as Q,k as A,m as Rt,t as be,Q as Bt,n as At,ap as Lt,O as It,R as Et}from"./index.11f64f49.js";import{Q as Mt,u as Nt}from"./auth.3b3adf84.js";import{Q as zt}from"./QPage.a2fce125.js";let Dt=0;const Qt=["click","keydown"],Vt={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${Dt++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function jt(e,t,u,s){const i=nt(ze,ve);if(i===ve)return console.error("QTab/QRouteTab component needs to be child of QTabs"),ve;const{proxy:n}=ne(),l=S(null),d=S(null),w=S(null),R=h(()=>e.disable===!0||e.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},e.ripple===!0?{}:e.ripple)),m=h(()=>i.currentModel.value===e.name),L=h(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(m.value===!0?" q-tab--active"+(i.tabProps.value.activeClass?" "+i.tabProps.value.activeClass:"")+(i.tabProps.value.activeColor?` text-${i.tabProps.value.activeColor}`:"")+(i.tabProps.value.activeBgColor?` bg-${i.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(e.icon&&e.label&&i.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(e.noCaps===!0||i.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(e.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")+(s!==void 0?s.linkClass.value:"")),y=h(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(i.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(e.contentClass!==void 0?` ${e.contentClass}`:"")),p=h(()=>e.disable===!0||i.hasFocus.value===!0||m.value===!1&&i.hasActiveTab.value===!0?-1:e.tabindex||0);function q(r,T){if(T!==!0&&l.value!==null&&l.value.focus(),e.disable===!0){s!==void 0&&s.hasRouterLink.value===!0&&G(r);return}if(s===void 0){i.updateModel({name:e.name}),u("click",r);return}if(s.hasRouterLink.value===!0){const E=(C={})=>{let $;const c=C.to===void 0||ut(C.to,e.to)===!0?i.avoidRouteWatcher=st():null;return s.navigateToRouterLink(r,{...C,returnRouterError:!0}).catch(M=>{$=M}).then(M=>{if(c===i.avoidRouteWatcher&&(i.avoidRouteWatcher=!1,$===void 0&&(M===void 0||M.message.startsWith("Avoided redundant navigation")===!0)&&i.updateModel({name:e.name})),C.returnRouterError===!0)return $!==void 0?Promise.reject($):M})};u("click",r,E),r.defaultPrevented!==!0&&E();return}u("click",r)}function B(r){De(r,[13,32])?q(r,!0):lt(r)!==!0&&r.keyCode>=35&&r.keyCode<=40&&r.altKey!==!0&&r.metaKey!==!0&&i.onKbdNavigate(r.keyCode,n.$el)===!0&&G(r),u("keydown",r)}function I(){const r=i.tabProps.value.narrowIndicator,T=[],E=g("div",{ref:w,class:["q-tab__indicator",i.tabProps.value.indicatorClass]});e.icon!==void 0&&T.push(g(te,{class:"q-tab__icon",name:e.icon})),e.label!==void 0&&T.push(g("div",{class:"q-tab__label"},e.label)),e.alert!==!1&&T.push(e.alertIcon!==void 0?g(te,{class:"q-tab__alert-icon",color:e.alert!==!0?e.alert:void 0,name:e.alertIcon}):g("div",{class:"q-tab__alert"+(e.alert!==!0?` text-${e.alert}`:"")})),r===!0&&T.push(E);const C=[g("div",{class:"q-focus-helper",tabindex:-1,ref:l}),g("div",{class:y.value},ot(t.default,T))];return r===!1&&C.push(E),C}const z={name:h(()=>e.name),rootRef:d,tabIndicatorRef:w,routeData:s};ke(()=>{i.unregisterTab(z)}),at(()=>{i.registerTab(z)});function V(r,T){const E={ref:d,class:L.value,tabindex:p.value,role:"tab","aria-selected":m.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:q,onKeydown:B,...T};return it(g(r,E,I()),[[rt,R.value]])}return{renderTab:V,$tabs:i}}var ye=U({name:"QTab",props:Vt,emits:Qt,setup(e,{slots:t,emit:u}){const{renderTab:s}=jt(e,t,u);return()=>s("div")}});let We=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const t=document.createElement("div");Object.assign(t.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(t),e.scrollLeft=-1e3,We=e.scrollLeft>=0,e.remove()}function Ft(e,t,u){const s=u===!0?["left","right"]:["top","bottom"];return`absolute-${t===!0?s[0]:s[1]}${e?` text-${e}`:""}`}const Wt=["left","center","right","justify"];var Ot=U({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:e=>Wt.includes(e)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(e,{slots:t,emit:u}){const{proxy:s}=ne(),{$q:i}=s,{registerTick:n}=fe(),{registerTick:l}=fe(),{registerTick:d}=fe(),{registerTimeout:w,removeTimeout:R}=Ae(),{registerTimeout:m,removeTimeout:L}=Ae(),y=S(null),p=S(null),q=S(e.modelValue),B=S(!1),I=S(!0),z=S(!1),V=S(!1),r=[],T=S(0),E=S(!1);let C=null,$=null,c;const M=h(()=>({activeClass:e.activeClass,activeColor:e.activeColor,activeBgColor:e.activeBgColor,indicatorClass:Ft(e.indicatorColor,e.switchIndicator,e.vertical),narrowIndicator:e.narrowIndicator,inlineLabel:e.inlineLabel,noCaps:e.noCaps})),F=h(()=>{const a=T.value,o=q.value;for(let v=0;v<a;v++)if(r[v].name.value===o)return!0;return!1}),oe=h(()=>`q-tabs__content--align-${B.value===!0?"left":V.value===!0?"justify":e.align}`),ue=h(()=>`q-tabs row no-wrap items-center q-tabs--${B.value===!0?"":"not-"}scrollable q-tabs--${e.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${e.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${e.mobileArrows===!0?"":"out"}-arrows`+(e.dense===!0?" q-tabs--dense":"")+(e.shrink===!0?" col-shrink":"")+(e.stretch===!0?" self-stretch":"")),f=h(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+oe.value+(e.contentClass!==void 0?` ${e.contentClass}`:"")),k=h(()=>e.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),D=h(()=>e.vertical!==!0&&i.lang.rtl===!0),W=h(()=>We===!1&&D.value===!0);Y(D,X),Y(()=>e.modelValue,a=>{se({name:a,setCurrent:!0,skipEmit:!0})}),Y(()=>e.outsideArrows,ae);function se({name:a,setCurrent:o,skipEmit:v}){q.value!==a&&(v!==!0&&e["onUpdate:modelValue"]!==void 0&&u("update:modelValue",a),(o===!0||e["onUpdate:modelValue"]===void 0)&&(Oe(q.value,a),q.value=a))}function ae(){n(()=>{Se({width:y.value.offsetWidth,height:y.value.offsetHeight})})}function Se(a){if(k.value===void 0||p.value===null)return;const o=a[k.value.container],v=Math.min(p.value[k.value.scroll],Array.prototype.reduce.call(p.value.children,(x,_)=>x+(_[k.value.content]||0),0)),P=o>0&&v>o;B.value=P,P===!0&&l(X),V.value=o<parseInt(e.breakpoint,10)}function Oe(a,o){const v=a!=null&&a!==""?r.find(x=>x.name.value===a):null,P=o!=null&&o!==""?r.find(x=>x.name.value===o):null;if(v&&P){const x=v.tabIndicatorRef.value,_=P.tabIndicatorRef.value;C!==null&&(clearTimeout(C),C=null),x.style.transition="none",x.style.transform="none",_.style.transition="none",_.style.transform="none";const b=x.getBoundingClientRect(),N=_.getBoundingClientRect();_.style.transform=e.vertical===!0?`translate3d(0,${b.top-N.top}px,0) scale3d(1,${N.height?b.height/N.height:1},1)`:`translate3d(${b.left-N.left}px,0,0) scale3d(${N.width?b.width/N.width:1},1,1)`,d(()=>{C=setTimeout(()=>{C=null,_.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",_.style.transform="none"},70)})}P&&B.value===!0&&H(P.rootRef.value)}function H(a){const{left:o,width:v,top:P,height:x}=p.value.getBoundingClientRect(),_=a.getBoundingClientRect();let b=e.vertical===!0?_.top-P:_.left-o;if(b<0){p.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(b),X();return}b+=e.vertical===!0?_.height-x:_.width-v,b>0&&(p.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(b),X())}function X(){const a=p.value;if(a===null)return;const o=a.getBoundingClientRect(),v=e.vertical===!0?a.scrollTop:Math.abs(a.scrollLeft);D.value===!0?(I.value=Math.ceil(v+o.width)<a.scrollWidth-1,z.value=v>0):(I.value=v>0,z.value=e.vertical===!0?Math.ceil(v+o.height)<a.scrollHeight:Math.ceil(v+o.width)<a.scrollWidth)}function Te(a){$!==null&&clearInterval($),$=setInterval(()=>{He(a)===!0&&O()},5)}function qe(){Te(W.value===!0?Number.MAX_SAFE_INTEGER:0)}function Ce(){Te(W.value===!0?0:Number.MAX_SAFE_INTEGER)}function O(){$!==null&&(clearInterval($),$=null)}function Ke(a,o){const v=Array.prototype.filter.call(p.value.children,N=>N===o||N.matches&&N.matches(".q-tab.q-focusable")===!0),P=v.length;if(P===0)return;if(a===36)return H(v[0]),v[0].focus(),!0;if(a===35)return H(v[P-1]),v[P-1].focus(),!0;const x=a===(e.vertical===!0?38:37),_=a===(e.vertical===!0?40:39),b=x===!0?-1:_===!0?1:void 0;if(b!==void 0){const N=D.value===!0?-1:1,j=v.indexOf(o)+b*N;return j>=0&&j<P&&(H(v[j]),v[j].focus({preventScroll:!0})),!0}}const Ue=h(()=>W.value===!0?{get:a=>Math.abs(a.scrollLeft),set:(a,o)=>{a.scrollLeft=-o}}:e.vertical===!0?{get:a=>a.scrollTop,set:(a,o)=>{a.scrollTop=o}}:{get:a=>a.scrollLeft,set:(a,o)=>{a.scrollLeft=o}});function He(a){const o=p.value,{get:v,set:P}=Ue.value;let x=!1,_=v(o);const b=a<_?-1:1;return _+=b*5,_<0?(x=!0,_=0):(b===-1&&_<=a||b===1&&_>=a)&&(x=!0,_=a),P(o,_),X(),x}function Pe(a,o){for(const v in a)if(a[v]!==o[v])return!1;return!0}function Xe(){let a=null,o={matchedLen:0,queryDiff:9999,hrefLen:0};const v=r.filter(b=>b.routeData!==void 0&&b.routeData.hasRouterLink.value===!0),{hash:P,query:x}=s.$route,_=Object.keys(x).length;for(const b of v){const N=b.routeData.exact.value===!0;if(b.routeData[N===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:j,query:ce,matched:et,href:tt}=b.routeData.resolvedLink.value,de=Object.keys(ce).length;if(N===!0){if(j!==P||de!==_||Pe(x,ce)===!1)continue;a=b.name.value;break}if(j!==""&&j!==P||de!==0&&Pe(ce,x)===!1)continue;const K={matchedLen:et.length,queryDiff:_-de,hrefLen:tt.length-j.length};if(K.matchedLen>o.matchedLen){a=b.name.value,o=K;continue}else if(K.matchedLen!==o.matchedLen)continue;if(K.queryDiff<o.queryDiff)a=b.name.value,o=K;else if(K.queryDiff!==o.queryDiff)continue;K.hrefLen>o.hrefLen&&(a=b.name.value,o=K)}a===null&&r.some(b=>b.routeData===void 0&&b.name.value===q.value)===!0||se({name:a,setCurrent:!0})}function Ye(a){if(R(),E.value!==!0&&y.value!==null&&a.target&&typeof a.target.closest=="function"){const o=a.target.closest(".q-tab");o&&y.value.contains(o)===!0&&(E.value=!0,B.value===!0&&H(o))}}function Ge(){w(()=>{E.value=!1},30)}function ie(){$e.avoidRouteWatcher===!1?m(Xe):L()}function xe(){if(c===void 0){const a=Y(()=>s.$route.fullPath,ie);c=()=>{a(),c=void 0}}}function Ze(a){r.push(a),T.value++,ae(),a.routeData===void 0||s.$route===void 0?m(()=>{if(B.value===!0){const o=q.value,v=o!=null&&o!==""?r.find(P=>P.name.value===o):null;v&&H(v.rootRef.value)}}):(xe(),a.routeData.hasRouterLink.value===!0&&ie())}function Je(a){r.splice(r.indexOf(a),1),T.value--,ae(),c!==void 0&&a.routeData!==void 0&&(r.every(o=>o.routeData===void 0)===!0&&c(),ie())}const $e={currentModel:q,tabProps:M,hasFocus:E,hasActiveTab:F,registerTab:Ze,unregisterTab:Je,verifyRouteModel:ie,updateModel:se,onKbdNavigate:Ke,avoidRouteWatcher:!1};ct(ze,$e);function Re(){C!==null&&clearTimeout(C),O(),c!==void 0&&c()}let Be;return ke(Re),dt(()=>{Be=c!==void 0,Re()}),vt(()=>{Be===!0&&xe(),ae()}),()=>g("div",{ref:y,class:ue.value,role:"tablist",onFocusin:Ye,onFocusout:Ge},[g(Mt,{onResize:Se}),g("div",{ref:p,class:f.value,onScroll:X},Z(t.default)),g(te,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(I.value===!0?"":" q-tabs__arrow--faded"),name:e.leftIcon||i.iconSet.tabs[e.vertical===!0?"up":"left"],onMousedownPassive:qe,onTouchstartPassive:qe,onMouseupPassive:O,onMouseleavePassive:O,onTouchendPassive:O}),g(te,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(z.value===!0?"":" q-tabs__arrow--faded"),name:e.rightIcon||i.iconSet.tabs[e.vertical===!0?"down":"right"],onMousedownPassive:Ce,onTouchstartPassive:Ce,onMouseupPassive:O,onMouseleavePassive:O,onTouchendPassive:O})])}});const we={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},Kt=Object.keys(we);we.all=!0;function Ee(e){const t={};for(const u of Kt)e[u]===!0&&(t[u]=!0);return Object.keys(t).length===0?we:(t.horizontal===!0?t.left=t.right=!0:t.left===!0&&t.right===!0&&(t.horizontal=!0),t.vertical===!0?t.up=t.down=!0:t.up===!0&&t.down===!0&&(t.vertical=!0),t.horizontal===!0&&t.vertical===!0&&(t.all=!0),t)}const Ut=["INPUT","TEXTAREA"];function Me(e,t){return t.event===void 0&&e.target!==void 0&&e.target.draggable!==!0&&typeof t.handler=="function"&&Ut.includes(e.target.nodeName.toUpperCase())===!1&&(e.qClonedBy===void 0||e.qClonedBy.indexOf(t.uid)===-1)}function Ht(){if(window.getSelection!==void 0){const e=window.getSelection();e.empty!==void 0?e.empty():e.removeAllRanges!==void 0&&(e.removeAllRanges(),ft.is.mobile!==!0&&e.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}function Xt(e){const t=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((u,s)=>{const i=parseFloat(u);i&&(t[s]=i)}),t}var Yt=ht({name:"touch-swipe",beforeMount(e,{value:t,arg:u,modifiers:s}){if(s.mouse!==!0&&J.has.touch!==!0)return;const i=s.mouseCapture===!0?"Capture":"",n={handler:t,sensitivity:Xt(u),direction:Ee(s),noop:mt,mouseStart(l){Me(l,n)&&gt(l)&&(re(n,"temp",[[document,"mousemove","move",`notPassive${i}`],[document,"mouseup","end","notPassiveCapture"]]),n.start(l,!0))},touchStart(l){if(Me(l,n)){const d=l.target;re(n,"temp",[[d,"touchmove","move","notPassiveCapture"],[d,"touchcancel","end","notPassiveCapture"],[d,"touchend","end","notPassiveCapture"]]),n.start(l)}},start(l,d){J.is.firefox===!0&&he(e,!0);const w=Le(l);n.event={x:w.left,y:w.top,time:Date.now(),mouse:d===!0,dir:!1}},move(l){if(n.event===void 0)return;if(n.event.dir!==!1){G(l);return}const d=Date.now()-n.event.time;if(d===0)return;const w=Le(l),R=w.left-n.event.x,m=Math.abs(R),L=w.top-n.event.y,y=Math.abs(L);if(n.event.mouse!==!0){if(m<n.sensitivity[1]&&y<n.sensitivity[1]){n.end(l);return}}else if(window.getSelection().toString()!==""){n.end(l);return}else if(m<n.sensitivity[2]&&y<n.sensitivity[2])return;const p=m/d,q=y/d;n.direction.vertical===!0&&m<y&&m<100&&q>n.sensitivity[0]&&(n.event.dir=L<0?"up":"down"),n.direction.horizontal===!0&&m>y&&y<100&&p>n.sensitivity[0]&&(n.event.dir=R<0?"left":"right"),n.direction.up===!0&&m<y&&L<0&&m<100&&q>n.sensitivity[0]&&(n.event.dir="up"),n.direction.down===!0&&m<y&&L>0&&m<100&&q>n.sensitivity[0]&&(n.event.dir="down"),n.direction.left===!0&&m>y&&R<0&&y<100&&p>n.sensitivity[0]&&(n.event.dir="left"),n.direction.right===!0&&m>y&&R>0&&y<100&&p>n.sensitivity[0]&&(n.event.dir="right"),n.event.dir!==!1?(G(l),n.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Ht(),n.styleCleanup=B=>{n.styleCleanup=void 0,document.body.classList.remove("non-selectable");const I=()=>{document.body.classList.remove("no-pointer-events--children")};B===!0?setTimeout(I,50):I()}),n.handler({evt:l,touch:n.event.mouse!==!0,mouse:n.event.mouse,direction:n.event.dir,duration:d,distance:{x:m,y}})):n.end(l)},end(l){n.event!==void 0&&(me(n,"temp"),J.is.firefox===!0&&he(e,!1),n.styleCleanup!==void 0&&n.styleCleanup(!0),l!==void 0&&n.event.dir!==!1&&G(l),n.event=void 0)}};if(e.__qtouchswipe=n,s.mouse===!0){const l=s.mouseCapture===!0||s.mousecapture===!0?"Capture":"";re(n,"main",[[e,"mousedown","mouseStart",`passive${l}`]])}J.has.touch===!0&&re(n,"main",[[e,"touchstart","touchStart",`passive${s.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,t){const u=e.__qtouchswipe;u!==void 0&&(t.oldValue!==t.value&&(typeof t.value!="function"&&u.end(),u.handler=t.value),u.direction=Ee(t.modifiers))},beforeUnmount(e){const t=e.__qtouchswipe;t!==void 0&&(me(t,"main"),me(t,"temp"),J.is.firefox===!0&&he(e,!1),t.styleCleanup!==void 0&&t.styleCleanup(),delete e.__qtouchswipe)}});function Gt(){const e=new Map;return{getCache:function(t,u){return e[t]===void 0?e[t]=u:e[t]},getCacheWithFn:function(t,u){return e[t]===void 0?e[t]=u():e[t]}}}const Zt={name:{required:!0},disable:Boolean},Ne={setup(e,{slots:t}){return()=>g("div",{class:"q-panel scroll",role:"tabpanel"},Z(t.default))}},Jt={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},en=["update:modelValue","beforeTransition","transition"];function tn(){const{props:e,emit:t,proxy:u}=ne(),{getCacheWithFn:s}=Gt();let i,n;const l=S(null),d=S(null);function w(f){const k=e.vertical===!0?"up":"left";$((u.$q.lang.rtl===!0?-1:1)*(f.direction===k?1:-1))}const R=h(()=>[[Yt,w,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),m=h(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),L=h(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),y=h(()=>`--q-transition-duration: ${e.transitionDuration}ms`),p=h(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),q=h(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),B=h(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);Y(()=>e.modelValue,(f,k)=>{const D=r(f)===!0?T(f):-1;n!==!0&&C(D===-1?0:D<T(k)?-1:1),l.value!==D&&(l.value=D,t("beforeTransition",f,k),bt(()=>{t("transition",f,k)}))});function I(){$(1)}function z(){$(-1)}function V(f){t("update:modelValue",f)}function r(f){return f!=null&&f!==""}function T(f){return i.findIndex(k=>k.props.name===f&&k.props.disable!==""&&k.props.disable!==!0)}function E(){return i.filter(f=>f.props.disable!==""&&f.props.disable!==!0)}function C(f){const k=f!==0&&e.animated===!0&&l.value!==-1?"q-transition--"+(f===-1?m.value:L.value):null;d.value!==k&&(d.value=k)}function $(f,k=l.value){let D=k+f;for(;D>-1&&D<i.length;){const W=i[D];if(W!==void 0&&W.props.disable!==""&&W.props.disable!==!0){C(f),n=!0,t("update:modelValue",W.props.name),setTimeout(()=>{n=!1});return}D+=f}e.infinite===!0&&i.length!==0&&k!==-1&&k!==i.length&&$(f,f===-1?i.length:-1)}function c(){const f=T(e.modelValue);return l.value!==f&&(l.value=f),!0}function M(){const f=r(e.modelValue)===!0&&c()&&i[l.value];return e.keepAlive===!0?[g(pt,q.value,[g(B.value===!0?s(p.value,()=>({...Ne,name:p.value})):Ne,{key:p.value,style:y.value},()=>f)])]:[g("div",{class:"q-panel scroll",style:y.value,key:p.value,role:"tabpanel"},[f])]}function F(){if(i.length!==0)return e.animated===!0?[g(Qe,{name:d.value},M)]:M()}function oe(f){return i=yt(Z(f.default,[])).filter(k=>k.props!==null&&k.props.slot===void 0&&r(k.props.name)===!0),i.length}function ue(){return i}return Object.assign(u,{next:I,previous:z,goTo:V}),{panelIndex:l,panelDirectives:R,updatePanelsList:oe,updatePanelIndex:c,getPanelContent:F,getEnabledPanels:E,getPanels:ue,isValidPanelName:r,keepAliveProps:q,needsUniqueKeepAliveWrapper:B,goToPanelByOffset:$,goToPanel:V,nextPanel:I,previousPanel:z}}var pe=U({name:"QTabPanel",props:Zt,setup(e,{slots:t}){return()=>g("div",{class:"q-tab-panel",role:"tabpanel"},Z(t.default))}}),nn=U({name:"QTabPanels",props:{...Jt,...Ve},emits:en,setup(e,{slots:t}){const u=ne(),s=je(e,u.proxy.$q),{updatePanelsList:i,getPanelContent:n,panelDirectives:l}=tn(),d=h(()=>"q-tab-panels q-panel-parent"+(s.value===!0?" q-tab-panels--dark q-dark":""));return()=>(i(t),_t("div",{class:d.value},n(),"pan",e.swipeable,()=>l.value))}}),an=U({name:"QAvatar",props:{...kt,fontSize:String,color:String,textColor:String,icon:String,square:Boolean,rounded:Boolean},setup(e,{slots:t}){const u=wt(e),s=h(()=>"q-avatar"+(e.color?` bg-${e.color}`:"")+(e.textColor?` text-${e.textColor} q-chip--colored`:"")+(e.square===!0?" q-avatar--square":e.rounded===!0?" rounded-borders":"")),i=h(()=>e.fontSize?{fontSize:e.fontSize}:null);return()=>{const n=e.icon!==void 0?[g(te,{name:e.icon})]:void 0;return g("div",{class:s.value,style:u.value},[g("div",{class:"q-avatar__content row flex-center overflow-hidden",style:i.value},St(t.default,n))])}}}),le=U({name:"QItemSection",props:{avatar:Boolean,thumbnail:Boolean,side:Boolean,top:Boolean,noWrap:Boolean},setup(e,{slots:t}){const u=h(()=>`q-item__section column q-item__section--${e.avatar===!0||e.side===!0||e.thumbnail===!0?"side":"main"}`+(e.top===!0?" q-item__section--top justify-start":" justify-center")+(e.avatar===!0?" q-item__section--avatar":"")+(e.thumbnail===!0?" q-item__section--thumbnail":"")+(e.noWrap===!0?" q-item__section--nowrap":""));return()=>g("div",{class:u.value},Z(t.default))}});const rn={ratio:[String,Number]};function ln(e,t){return h(()=>{const u=Number(e.ratio||(t!==void 0?t.value:void 0));return isNaN(u)!==!0&&u>0?{paddingBottom:`${100/u}%`}:null})}const on=16/9;var un=U({name:"QImg",props:{...rn,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:on},placeholderSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:t,emit:u}){const s=S(e.initialRatio),i=ln(e,s);let n=null,l=!1;const d=[S(null),S(I())],w=S(0),R=S(!1),m=S(!1),L=h(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),y=h(()=>({width:e.width,height:e.height})),p=h(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition`),q=h(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));Y(()=>B(),z);function B(){return e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null}function I(){return e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null}function z(c){n!==null&&(clearTimeout(n),n=null),m.value=!1,c===null?(R.value=!1,d[w.value^1].value=I()):R.value=!0,d[w.value].value=c}function V({target:c}){l!==!0&&(n!==null&&(clearTimeout(n),n=null),s.value=c.naturalHeight===0?.5:c.naturalWidth/c.naturalHeight,r(c,1))}function r(c,M){l===!0||M===1e3||(c.complete===!0?T(c):n=setTimeout(()=>{n=null,r(c,M+1)},50))}function T(c){l!==!0&&(w.value=w.value^1,d[w.value].value=null,R.value=!1,m.value=!1,u("load",c.currentSrc||c.src))}function E(c){n!==null&&(clearTimeout(n),n=null),R.value=!1,m.value=!0,d[w.value].value=null,d[w.value^1].value=I(),u("error",c)}function C(c){const M=d[c].value,F={key:"img_"+c,class:p.value,style:q.value,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...M};return w.value===c?(F.class+=" q-img__image--waiting",Object.assign(F,{onLoad:V,onError:E})):F.class+=" q-img__image--loaded",g("div",{class:"q-img__container absolute-full",key:"img"+c},g("img",F))}function $(){return R.value!==!0?g("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},Z(t[m.value===!0?"error":"default"])):g("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},t.loading!==void 0?t.loading():e.noSpinner===!0?void 0:[g(Tt,{color:e.spinnerColor,size:e.spinnerSize})])}return z(B()),ke(()=>{l=!0,n!==null&&(clearTimeout(n),n=null)}),()=>{const c=[];return i.value!==null&&c.push(g("div",{key:"filler",style:i.value})),m.value!==!0&&(d[0].value!==null&&c.push(C(0)),d[1].value!==null&&c.push(C(1))),c.push(g(Qe,{name:"q-transition--fade"},$)),g("div",{class:L.value,style:y.value,role:"img","aria-label":e.alt},c)}}}),sn=U({name:"QItem",props:{...Ve,...qt,tag:{type:String,default:"div"},active:{type:Boolean,default:null},clickable:Boolean,dense:Boolean,insetLevel:Number,tabindex:[String,Number],focused:Boolean,manualFocus:Boolean},emits:["click","keyup"],setup(e,{slots:t,emit:u}){const{proxy:{$q:s}}=ne(),i=je(e,s),{hasLink:n,linkAttrs:l,linkClass:d,linkTag:w,navigateOnClick:R}=Ct(),m=S(null),L=S(null),y=h(()=>e.clickable===!0||n.value===!0||e.tag==="label"),p=h(()=>e.disable!==!0&&y.value===!0),q=h(()=>"q-item q-item-type row no-wrap"+(e.dense===!0?" q-item--dense":"")+(i.value===!0?" q-item--dark":"")+(n.value===!0&&e.active===null?d.value:e.active===!0?` q-item--active${e.activeClass!==void 0?` ${e.activeClass}`:""}`:"")+(e.disable===!0?" disabled":"")+(p.value===!0?" q-item--clickable q-link cursor-pointer "+(e.manualFocus===!0?"q-manual-focusable":"q-focusable q-hoverable")+(e.focused===!0?" q-manual-focusable--focused":""):"")),B=h(()=>{if(e.insetLevel===void 0)return null;const r=s.lang.rtl===!0?"Right":"Left";return{["padding"+r]:16+e.insetLevel*56+"px"}});function I(r){p.value===!0&&(L.value!==null&&(r.qKeyEvent!==!0&&document.activeElement===m.value?L.value.focus():document.activeElement===L.value&&m.value.focus()),R(r))}function z(r){if(p.value===!0&&De(r,13)===!0){G(r),r.qKeyEvent=!0;const T=new MouseEvent("click",r);T.qKeyEvent=!0,m.value.dispatchEvent(T)}u("keyup",r)}function V(){const r=Pt(t.default,[]);return p.value===!0&&r.unshift(g("div",{class:"q-focus-helper",tabindex:-1,ref:L})),r}return()=>{const r={ref:m,class:q.value,style:B.value,role:"listitem",onClick:I,onKeyup:z};return p.value===!0?(r.tabindex=e.tabindex||"0",Object.assign(r,l.value)):y.value===!0&&(r["aria-disabled"]="true"),g(w.value,r,V())}}});const cn={name:"TrackList",props:{items:Array},data(){return{audioSrc:"",currentlyPlaying:null}},methods:{playPreview(e){if(this.currentlyPlaying===e.preview_url){this.$refs.audio.pause(),this.currentlyPlaying=null;return}this.audioSrc=e.preview_url,this.$nextTick(()=>{this.$refs.audio.play(),this.currentlyPlaying=e.preview_url})}}},dn={class:"text-subtitle1"},vn={class:"text-caption text-grey-7"},fn=["src"];function hn(e,t,u,s,i,n){return ee(),Ie("div",null,[(ee(!0),Ie(xt,null,$t(u.items,(l,d)=>(ee(),_e(Lt,{class:"q-mb-sm",key:l.uri,flat:"",bordered:""},{default:Q(()=>[A(sn,null,{default:Q(()=>[A(le,{avatar:""},{default:Q(()=>[A(an,{color:"primary","text-color":"white"},{default:Q(()=>[Rt(be(d+1),1)]),_:2},1024)]),_:2},1024),A(le,{avatar:""},{default:Q(()=>[A(un,{src:l.album.images[2].url,style:{width:"64px",height:"64px"}},null,8,["src"])]),_:2},1024),A(le,null,{default:Q(()=>[ge("div",dn,be(l.name),1),ge("div",vn,be(l.artists[0].name),1)]),_:2},1024),l.preview_url?(ee(),_e(le,{key:0,side:""},{default:Q(()=>[A(Bt,{flat:"",round:"",dense:"",icon:"play_arrow",onClick:w=>n.playPreview(l),disable:i.currentlyPlaying===l.preview_url},null,8,["onClick","disable"])]),_:2},1024)):At("",!0)]),_:2},1024)]),_:2},1024))),128)),ge("audio",{ref:"audio",src:i.audioSrc,onEnded:t[0]||(t[0]=l=>i.currentlyPlaying=null)},null,40,fn)])}var mn=Fe(cn,[["render",hn]]);const gn=It({name:"IndexPage",components:{TrackList:mn},setup(){const e=Nt(),t=S("short");return{auth:e,tab:t}},data(){return{short_ranking:[],medium_ranking:[],long_ranking:[]}},async mounted(){if(!this.auth.accessToken){console.log("No access token found, redirecting to login...",this.auth),this.$router.push("/");return}if(this.auth.isTokenExpired()&&(console.log("Token expired, refreshing...",this.auth),await this.refreshToken(),!this.auth.accessToken)){this.$router.push("/");return}this.getUser(),this.getRankings()},methods:{getUser(){this.$axios.get("https://api.spotify.com/v1/me",{headers:{Authorization:`Bearer ${this.auth.accessToken}`}}).then(e=>{this.auth.user=e.data}).catch(e=>{console.error(e)})},getRankings(){["short_term","medium_term","long_term"].forEach(t=>{this.$axios.get("https://api.spotify.com/v1/me/top/tracks",{params:{time_range:t,limit:50},headers:{Authorization:`Bearer ${this.auth.accessToken}`}}).then(u=>{this[`${t.split("_")[0]}_ranking`]=u.data.items}).catch(u=>{console.error(u)})})},async refreshToken(){if(!this.auth.refreshToken){this.$router.push("/");return}const e=new URLSearchParams({grant_type:"refresh_token",refresh_token:this.auth.refreshToken,client_id:this.auth.clientId});try{const t=await this.$axios.post("https://accounts.spotify.com/api/token",e,{headers:{"Content-Type":"application/x-www-form-urlencoded"}});console.log("refresh response:",t.data),this.auth.setTokens(t.data.access_token,this.auth.refreshToken,Date.now()+t.data.expires_in*1e3)}catch(t){console.error("Refresh token failed",t),this.auth.logout(),this.$router.push("/")}}}});function bn(e,t,u,s,i,n){const l=Et("track-list");return ee(),_e(zt,{class:"q-pa-md"},{default:Q(()=>[A(Ot,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=d=>e.tab=d),dense:"",class:"text-teal","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:Q(()=>[A(ye,{name:"short",label:"\u8FD1\u56DB\u5468"}),A(ye,{name:"medium",label:"\u8FD1\u534A\u5E74"}),A(ye,{name:"long",label:"\u9577\u671F"})]),_:1},8,["modelValue"]),A(nn,{modelValue:e.tab,"onUpdate:modelValue":t[1]||(t[1]=d=>e.tab=d),animated:"",swipeable:""},{default:Q(()=>[A(pe,{name:"short"},{default:Q(()=>[A(l,{items:e.short_ranking},null,8,["items"])]),_:1}),A(pe,{name:"medium"},{default:Q(()=>[A(l,{items:e.medium_ranking},null,8,["items"])]),_:1}),A(pe,{name:"long"},{default:Q(()=>[A(l,{items:e.long_ranking},null,8,["items"])]),_:1})]),_:1},8,["modelValue"])]),_:1})}var kn=Fe(gn,[["render",bn]]);export{kn as default};
