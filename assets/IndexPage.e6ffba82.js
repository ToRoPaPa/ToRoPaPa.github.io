import{a as z,b as L,e as Y,d as Z}from"./render.369bff4f.js";import{j as d,l as c,n as W,r as y,B as p,k as ee,T as te,f as ae,q as ne,_ as le,K as ie,o as S,c as E,w as n,e as g,a as i,M as x,Q as D,R as K,S as F,N as _}from"./index.55343708.js";import{u as re,b as oe,Q as se,d as ue,a as ce,c as de}from"./use-router-link.bbd6ec3e.js";import{Q as fe}from"./QPage.fa20903e.js";import{u as me}from"./auth.5f2966e3.js";var w=z({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(e,{slots:t}){const s=d(()=>`q-card__section q-card__section--${e.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>c(e.tag,{class:s.value},L(t.default))}});const H={dark:{type:Boolean,default:null}};function G(e,t){return d(()=>e.dark===null?t.dark.isActive:e.dark)}var B=z({name:"QCard",props:{...H,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(e,{slots:t}){const{proxy:{$q:s}}=W(),f=G(e,s),h=d(()=>"q-card"+(f.value===!0?" q-card--dark q-dark":"")+(e.bordered===!0?" q-card--bordered":"")+(e.square===!0?" q-card--square no-border-radius":"")+(e.flat===!0?" q-card--flat no-shadow":""));return()=>c(e.tag,{class:h.value},L(t.default))}}),M=z({name:"QAvatar",props:{...re,fontSize:String,color:String,textColor:String,icon:String,square:Boolean,rounded:Boolean},setup(e,{slots:t}){const s=oe(e),f=d(()=>"q-avatar"+(e.color?` bg-${e.color}`:"")+(e.textColor?` text-${e.textColor} q-chip--colored`:"")+(e.square===!0?" q-avatar--square":e.rounded===!0?" rounded-borders":"")),h=d(()=>e.fontSize?{fontSize:e.fontSize}:null);return()=>{const o=e.icon!==void 0?[c(se,{name:e.icon})]:void 0;return c("div",{class:f.value,style:s.value},[c("div",{class:"q-avatar__content row flex-center overflow-hidden",style:h.value},Y(t.default,o))])}}}),C=z({name:"QItemSection",props:{avatar:Boolean,thumbnail:Boolean,side:Boolean,top:Boolean,noWrap:Boolean},setup(e,{slots:t}){const s=d(()=>`q-item__section column q-item__section--${e.avatar===!0||e.side===!0||e.thumbnail===!0?"side":"main"}`+(e.top===!0?" q-item__section--top justify-start":" justify-center")+(e.avatar===!0?" q-item__section--avatar":"")+(e.thumbnail===!0?" q-item__section--thumbnail":"")+(e.noWrap===!0?" q-item__section--nowrap":""));return()=>c("div",{class:s.value},L(t.default))}});const ve={ratio:[String,Number]};function ge(e,t){return d(()=>{const s=Number(e.ratio||(t!==void 0?t.value:void 0));return isNaN(s)!==!0&&s>0?{paddingBottom:`${100/s}%`}:null})}const he=16/9;var O=z({name:"QImg",props:{...ve,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:he},placeholderSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:t,emit:s}){const f=y(e.initialRatio),h=ge(e,f);let o=null,l=!1;const u=[y(null),y($())],m=y(0),q=y(!1),v=y(!1),k=d(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),Q=d(()=>({width:e.width,height:e.height})),b=d(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition`),P=d(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));p(()=>R(),N);function R(){return e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null}function $(){return e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null}function N(a){o!==null&&(clearTimeout(o),o=null),v.value=!1,a===null?(q.value=!1,u[m.value^1].value=$()):q.value=!0,u[m.value].value=a}function j({target:a}){l!==!0&&(o!==null&&(clearTimeout(o),o=null),f.value=a.naturalHeight===0?.5:a.naturalWidth/a.naturalHeight,r(a,1))}function r(a,I){l===!0||I===1e3||(a.complete===!0?T(a):o=setTimeout(()=>{o=null,r(a,I+1)},50))}function T(a){l!==!0&&(m.value=m.value^1,u[m.value].value=null,q.value=!1,v.value=!1,s("load",a.currentSrc||a.src))}function J(a){o!==null&&(clearTimeout(o),o=null),q.value=!1,v.value=!0,u[m.value].value=null,u[m.value^1].value=$(),s("error",a)}function V(a){const I=u[a].value,A={key:"img_"+a,class:b.value,style:P.value,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...I};return m.value===a?(A.class+=" q-img__image--waiting",Object.assign(A,{onLoad:j,onError:J})):A.class+=" q-img__image--loaded",c("div",{class:"q-img__container absolute-full",key:"img"+a},c("img",A))}function X(){return q.value!==!0?c("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},L(t[v.value===!0?"error":"default"])):c("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},t.loading!==void 0?t.loading():e.noSpinner===!0?void 0:[c(ue,{color:e.spinnerColor,size:e.spinnerSize})])}return N(R()),ee(()=>{l=!0,o!==null&&(clearTimeout(o),o=null)}),()=>{const a=[];return h.value!==null&&a.push(c("div",{key:"filler",style:h.value})),v.value!==!0&&(u[0].value!==null&&a.push(V(0)),u[1].value!==null&&a.push(V(1))),a.push(c(te,{name:"q-transition--fade"},X)),c("div",{class:k.value,style:Q.value,role:"img","aria-label":e.alt},a)}}}),U=z({name:"QItem",props:{...H,...ce,tag:{type:String,default:"div"},active:{type:Boolean,default:null},clickable:Boolean,dense:Boolean,insetLevel:Number,tabindex:[String,Number],focused:Boolean,manualFocus:Boolean},emits:["click","keyup"],setup(e,{slots:t,emit:s}){const{proxy:{$q:f}}=W(),h=G(e,f),{hasLink:o,linkAttrs:l,linkClass:u,linkTag:m,navigateOnClick:q}=de(),v=y(null),k=y(null),Q=d(()=>e.clickable===!0||o.value===!0||e.tag==="label"),b=d(()=>e.disable!==!0&&Q.value===!0),P=d(()=>"q-item q-item-type row no-wrap"+(e.dense===!0?" q-item--dense":"")+(h.value===!0?" q-item--dark":"")+(o.value===!0&&e.active===null?u.value:e.active===!0?` q-item--active${e.activeClass!==void 0?` ${e.activeClass}`:""}`:"")+(e.disable===!0?" disabled":"")+(b.value===!0?" q-item--clickable q-link cursor-pointer "+(e.manualFocus===!0?"q-manual-focusable":"q-focusable q-hoverable")+(e.focused===!0?" q-manual-focusable--focused":""):"")),R=d(()=>{if(e.insetLevel===void 0)return null;const r=f.lang.rtl===!0?"Right":"Left";return{["padding"+r]:16+e.insetLevel*56+"px"}});function $(r){b.value===!0&&(k.value!==null&&(r.qKeyEvent!==!0&&document.activeElement===v.value?k.value.focus():document.activeElement===k.value&&v.value.focus()),q(r))}function N(r){if(b.value===!0&&ae(r,13)===!0){ne(r),r.qKeyEvent=!0;const T=new MouseEvent("click",r);T.qKeyEvent=!0,v.value.dispatchEvent(T)}s("keyup",r)}function j(){const r=Z(t.default,[]);return b.value===!0&&r.unshift(c("div",{class:"q-focus-helper",tabindex:-1,ref:k})),r}return()=>{const r={ref:v,class:P.value,style:R.value,role:"listitem",onClick:$,onKeyup:N};return b.value===!0?(r.tabindex=e.tabindex||"0",Object.assign(r,l.value)):Q.value===!0&&(r["aria-disabled"]="true"),c(m.value,r,j())}}});const _e=ie({name:"IndexPage",setup(){return{auth:me()}},data(){return{short_ranking:[],medium_ranking:[],long_ranking:[]}},created(){this.getUser(),this.getRankings()},methods:{getUser(){const e=this;this.$axios({method:"get",url:"https://api.spotify.com/v1/me",headers:{Authorization:"Bearer "+this.auth.access_token}}).then(function(t){console.log(t),e.auth.user=t.data}).catch(function(t){console.log(t)})},getRankings(){const e=this;this.$axios({method:"get",url:"https://api.spotify.com/v1/me/top/tracks",params:{time_range:"short_term",limit:50},headers:{Authorization:"Bearer "+this.auth.access_token}}).then(function(t){console.log(t),e.short_ranking=t.data.items}).catch(function(t){console.log(t)}),this.$axios({method:"get",url:"https://api.spotify.com/v1/me/top/tracks",params:{time_range:"medium_term",limit:50},headers:{Authorization:"Bearer "+this.auth.access_token}}).then(function(t){console.log(t),e.medium_ranking=t.data.items}).catch(function(t){console.log(t)}),this.$axios({method:"get",url:"https://api.spotify.com/v1/me/top/tracks",params:{time_range:"long_term",limit:50},headers:{Authorization:"Bearer "+this.auth.access_token}}).then(function(t){console.log(t),e.long_ranking=t.data.items}).catch(function(t){console.log(t)})}}}),ye={class:"row"},qe={class:"col"},be={class:"text-h6"},Se={class:"text-subtitle2"},ke={class:"col"},xe={class:"text-h6"},we={class:"text-subtitle2"},Be={class:"col"},Ce={class:"text-h6"},ze={class:"text-subtitle2"};function $e(e,t,s,f,h,o){return S(),E(fe,{class:"flex flex-center"},{default:n(()=>[g("div",ye,[g("div",qe,[i(B,null,{default:n(()=>[i(w,{class:"text-h6"},{default:n(()=>[x("\u8FD1\u56DB\u5468\u6392\u540D")]),_:1})]),_:1}),(S(!0),D(F,null,K(e.short_ranking,(l,u)=>(S(),E(B,{class:"q-pa-none",key:l.uri,flat:"",bordered:""},{default:n(()=>[i(U,null,{default:n(()=>[i(C,{avatar:"",class:"q-py-none"},{default:n(()=>[i(M,{color:"primary","text-color":"white"},{default:n(()=>[x(_(u+1),1)]),_:2},1024)]),_:2},1024),i(C,{avatar:"",class:"q-py-none"},{default:n(()=>[i(O,{src:l.album.images[2].url,width:l.album.images[2].width+"px"},null,8,["src","width"])]),_:2},1024),i(w,{class:"q-py-none"},{default:n(()=>[g("div",be,_(l.name),1),g("div",Se,_(l.artists[0].name),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),g("div",ke,[i(B,null,{default:n(()=>[i(w,{class:"text-h6"},{default:n(()=>[x("\u8FD1\u534A\u5E74\u6392\u540D")]),_:1})]),_:1}),(S(!0),D(F,null,K(e.medium_ranking,(l,u)=>(S(),E(B,{class:"q-pa-none",key:l.uri,flat:"",bordered:""},{default:n(()=>[i(U,null,{default:n(()=>[i(C,{avatar:"",class:"q-py-none"},{default:n(()=>[i(M,{color:"primary","text-color":"white"},{default:n(()=>[x(_(u+1),1)]),_:2},1024)]),_:2},1024),i(C,{avatar:"",class:"q-py-none"},{default:n(()=>[i(O,{src:l.album.images[2].url,width:l.album.images[2].width+"px"},null,8,["src","width"])]),_:2},1024),i(w,{class:"q-py-none"},{default:n(()=>[g("div",xe,_(l.name),1),g("div",we,_(l.artists[0].name),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),g("div",Be,[i(B,null,{default:n(()=>[i(w,{class:"text-h6"},{default:n(()=>[x("\u9577\u671F\u6392\u540D")]),_:1})]),_:1}),(S(!0),D(F,null,K(e.long_ranking,(l,u)=>(S(),E(B,{class:"q-pa-none",key:l.uri,flat:"",bordered:""},{default:n(()=>[i(U,null,{default:n(()=>[i(C,{avatar:"",class:"q-py-none"},{default:n(()=>[i(M,{color:"primary","text-color":"white"},{default:n(()=>[x(_(u+1),1)]),_:2},1024)]),_:2},1024),i(C,{avatar:"",class:"q-py-none"},{default:n(()=>[i(O,{src:l.album.images[2].url,width:l.album.images[2].width+"px"},null,8,["src","width"])]),_:2},1024),i(w,{class:"q-py-none"},{default:n(()=>[g("div",Ce,_(l.name),1),g("div",ze,_(l.artists[0].name),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))])])]),_:1})}var Ae=le(_e,[["render",$e]]);export{Ae as default};
