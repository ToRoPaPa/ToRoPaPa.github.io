import{R as st,a as ae,v as Oe,g as ct,u as dt,b as vt,c as ft,d as mt,e as ht,Q as gt}from"./QBtn.ba0ba838.js";import{a as bt,c as W,h as Y,b as yt,f as pt,i as _t,e as wt}from"./dom.db2a983e.js";import{v as he,r as q,f,m as re,C as kt,x as qt,n as St,h,Q as Ue,q as ee,j as Ke,R as Tt,g as X,S as Ct,U as Te,H as He,B as J,V as xt,A as Pt,W as Bt,X as te,D as Rt,Y as $t,k as oe,Z as ge,p as Ne,l as be,T as Xe,$ as At,_ as Ye,o as ne,a0 as Qe,a1 as Lt,a2 as It,e as ye,c as Se,w as V,a as A,M as Et,N as pe,a3 as Mt,K as Dt,O as Nt}from"./index.0f4cea0f.js";import{Q as Qt,u as zt}from"./auth.27f9a17a.js";import{Q as Vt}from"./QPage.26dccdcc.js";let _e,ue=0;const E=new Array(256);for(let e=0;e<256;e++)E[e]=(e+256).toString(16).substring(1);const jt=(()=>{const e=typeof crypto!="undefined"?crypto:typeof window!="undefined"?window.crypto||window.msCrypto:void 0;if(e!==void 0){if(e.randomBytes!==void 0)return e.randomBytes;if(e.getRandomValues!==void 0)return t=>{const r=new Uint8Array(t);return e.getRandomValues(r),r}}return t=>{const r=[];for(let u=t;u>0;u--)r.push(Math.floor(Math.random()*256));return r}})(),ze=4096;function Ft(){(_e===void 0||ue+16>ze)&&(ue=0,_e=jt(ze));const e=Array.prototype.slice.call(_e,ue,ue+=16);return e[6]=e[6]&15|64,e[8]=e[8]&63|128,E[e[0]]+E[e[1]]+E[e[2]]+E[e[3]]+"-"+E[e[4]]+E[e[5]]+"-"+E[e[6]]+E[e[7]]+"-"+E[e[8]]+E[e[9]]+"-"+E[e[10]]+E[e[11]]+E[e[12]]+E[e[13]]+E[e[14]]+E[e[15]]}let Wt=0;const Ot=["click","keydown"],Ut={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${Wt++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function Kt(e,t,r,u){const i=qt(Ue,he);if(i===he)return console.error("QTab/QRouteTab component needs to be child of QTabs"),he;const{proxy:n}=X(),o=q(null),d=q(null),k=q(null),R=f(()=>e.disable===!0||e.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},e.ripple===!0?{}:e.ripple)),g=f(()=>i.currentModel.value===e.name),L=f(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(g.value===!0?" q-tab--active"+(i.tabProps.value.activeClass?" "+i.tabProps.value.activeClass:"")+(i.tabProps.value.activeColor?` text-${i.tabProps.value.activeColor}`:"")+(i.tabProps.value.activeBgColor?` bg-${i.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(e.icon&&e.label&&i.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(e.noCaps===!0||i.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(e.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")+(u!==void 0?u.linkClass.value:"")),y=f(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(i.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(e.contentClass!==void 0?` ${e.contentClass}`:"")),p=f(()=>e.disable===!0||i.hasFocus.value===!0||g.value===!1&&i.hasActiveTab.value===!0?-1:e.tabindex||0);function T(l,S){if(S!==!0&&o.value!==null&&o.value.focus(),e.disable===!0){u!==void 0&&u.hasRouterLink.value===!0&&ee(l);return}if(u===void 0){i.updateModel({name:e.name}),r("click",l);return}if(u.hasRouterLink.value===!0){const M=(C={})=>{let B;const c=C.to===void 0||Ct(C.to,e.to)===!0?i.avoidRouteWatcher=Ft():null;return u.navigateToRouterLink(l,{...C,returnRouterError:!0}).catch(D=>{B=D}).then(D=>{if(c===i.avoidRouteWatcher&&(i.avoidRouteWatcher=!1,B===void 0&&(D===void 0||D.message.startsWith("Avoided redundant navigation")===!0)&&i.updateModel({name:e.name})),C.returnRouterError===!0)return B!==void 0?Promise.reject(B):D})};r("click",l,M),l.defaultPrevented!==!0&&M();return}r("click",l)}function $(l){Ke(l,[13,32])?T(l,!0):Tt(l)!==!0&&l.keyCode>=35&&l.keyCode<=40&&l.altKey!==!0&&l.metaKey!==!0&&i.onKbdNavigate(l.keyCode,n.$el)===!0&&ee(l),r("keydown",l)}function I(){const l=i.tabProps.value.narrowIndicator,S=[],M=h("div",{ref:k,class:["q-tab__indicator",i.tabProps.value.indicatorClass]});e.icon!==void 0&&S.push(h(ae,{class:"q-tab__icon",name:e.icon})),e.label!==void 0&&S.push(h("div",{class:"q-tab__label"},e.label)),e.alert!==!1&&S.push(e.alertIcon!==void 0?h(ae,{class:"q-tab__alert-icon",color:e.alert!==!0?e.alert:void 0,name:e.alertIcon}):h("div",{class:"q-tab__alert"+(e.alert!==!0?` text-${e.alert}`:"")})),l===!0&&S.push(M);const C=[h("div",{class:"q-focus-helper",tabindex:-1,ref:o}),h("div",{class:y.value},bt(t.default,S))];return l===!1&&C.push(M),C}const Q={name:f(()=>e.name),rootRef:d,tabIndicatorRef:k,routeData:u};re(()=>{i.unregisterTab(Q)}),kt(()=>{i.registerTab(Q)});function j(l,S){const M={ref:d,class:L.value,tabindex:p.value,role:"tab","aria-selected":g.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:T,onKeydown:$,...S};return St(h(l,M,I()),[[st,R.value]])}return{renderTab:j,$tabs:i}}var we=W({name:"QTab",props:Ut,emits:Ot,setup(e,{slots:t,emit:r}){const{renderTab:u}=Kt(e,t,r);return()=>u("div")}});function ke(){let e;const t=X();function r(){e=void 0}return Te(r),re(r),{removeTick:r,registerTick(u){e=u,He(()=>{e===u&&(Oe(t)===!1&&e(),e=void 0)})}}}function Ve(){let e=null;const t=X();function r(){e!==null&&(clearTimeout(e),e=null)}return Te(r),re(r),{removeTimeout:r,registerTimeout(u,i){r(),Oe(t)===!1&&(e=setTimeout(u,i))}}}let Ge=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const t=document.createElement("div");Object.assign(t.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(t),e.scrollLeft=-1e3,Ge=e.scrollLeft>=0,e.remove()}function Ht(e,t,r){const u=r===!0?["left","right"]:["top","bottom"];return`absolute-${t===!0?u[0]:u[1]}${e?` text-${e}`:""}`}const Xt=["left","center","right","justify"];var Yt=W({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:e=>Xt.includes(e)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(e,{slots:t,emit:r}){const{proxy:u}=X(),{$q:i}=u,{registerTick:n}=ke(),{registerTick:o}=ke(),{registerTick:d}=ke(),{registerTimeout:k,removeTimeout:R}=Ve(),{registerTimeout:g,removeTimeout:L}=Ve(),y=q(null),p=q(null),T=q(e.modelValue),$=q(!1),I=q(!0),Q=q(!1),j=q(!1),l=[],S=q(0),M=q(!1);let C=null,B=null,c;const D=f(()=>({activeClass:e.activeClass,activeColor:e.activeColor,activeBgColor:e.activeBgColor,indicatorClass:Ht(e.indicatorColor,e.switchIndicator,e.vertical),narrowIndicator:e.narrowIndicator,inlineLabel:e.inlineLabel,noCaps:e.noCaps})),O=f(()=>{const a=S.value,s=T.value;for(let v=0;v<a;v++)if(l[v].name.value===s)return!0;return!1}),ce=f(()=>`q-tabs__content--align-${$.value===!0?"left":j.value===!0?"justify":e.align}`),de=f(()=>`q-tabs row no-wrap items-center q-tabs--${$.value===!0?"":"not-"}scrollable q-tabs--${e.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${e.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${e.mobileArrows===!0?"":"out"}-arrows`+(e.dense===!0?" q-tabs--dense":"")+(e.shrink===!0?" col-shrink":"")+(e.stretch===!0?" self-stretch":"")),m=f(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+ce.value+(e.contentClass!==void 0?` ${e.contentClass}`:"")),w=f(()=>e.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),z=f(()=>e.vertical!==!0&&i.lang.rtl===!0),U=f(()=>Ge===!1&&z.value===!0);J(z,Z),J(()=>e.modelValue,a=>{ve({name:a,setCurrent:!0,skipEmit:!0})}),J(()=>e.outsideArrows,ie);function ve({name:a,setCurrent:s,skipEmit:v}){T.value!==a&&(v!==!0&&e["onUpdate:modelValue"]!==void 0&&r("update:modelValue",a),(s===!0||e["onUpdate:modelValue"]===void 0)&&(Ze(T.value,a),T.value=a))}function ie(){n(()=>{Be({width:y.value.offsetWidth,height:y.value.offsetHeight})})}function Be(a){if(w.value===void 0||p.value===null)return;const s=a[w.value.container],v=Math.min(p.value[w.value.scroll],Array.prototype.reduce.call(p.value.children,(P,_)=>P+(_[w.value.content]||0),0)),x=s>0&&v>s;$.value=x,x===!0&&o(Z),j.value=s<parseInt(e.breakpoint,10)}function Ze(a,s){const v=a!=null&&a!==""?l.find(P=>P.name.value===a):null,x=s!=null&&s!==""?l.find(P=>P.name.value===s):null;if(v&&x){const P=v.tabIndicatorRef.value,_=x.tabIndicatorRef.value;C!==null&&(clearTimeout(C),C=null),P.style.transition="none",P.style.transform="none",_.style.transition="none",_.style.transform="none";const b=P.getBoundingClientRect(),N=_.getBoundingClientRect();_.style.transform=e.vertical===!0?`translate3d(0,${b.top-N.top}px,0) scale3d(1,${N.height?b.height/N.height:1},1)`:`translate3d(${b.left-N.left}px,0,0) scale3d(${N.width?b.width/N.width:1},1,1)`,d(()=>{C=setTimeout(()=>{C=null,_.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",_.style.transform="none"},70)})}x&&$.value===!0&&G(x.rootRef.value)}function G(a){const{left:s,width:v,top:x,height:P}=p.value.getBoundingClientRect(),_=a.getBoundingClientRect();let b=e.vertical===!0?_.top-x:_.left-s;if(b<0){p.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(b),Z();return}b+=e.vertical===!0?_.height-P:_.width-v,b>0&&(p.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(b),Z())}function Z(){const a=p.value;if(a===null)return;const s=a.getBoundingClientRect(),v=e.vertical===!0?a.scrollTop:Math.abs(a.scrollLeft);z.value===!0?(I.value=Math.ceil(v+s.width)<a.scrollWidth-1,Q.value=v>0):(I.value=v>0,Q.value=e.vertical===!0?Math.ceil(v+s.height)<a.scrollHeight:Math.ceil(v+s.width)<a.scrollWidth)}function Re(a){B!==null&&clearInterval(B),B=setInterval(()=>{tt(a)===!0&&K()},5)}function $e(){Re(U.value===!0?Number.MAX_SAFE_INTEGER:0)}function Ae(){Re(U.value===!0?0:Number.MAX_SAFE_INTEGER)}function K(){B!==null&&(clearInterval(B),B=null)}function Je(a,s){const v=Array.prototype.filter.call(p.value.children,N=>N===s||N.matches&&N.matches(".q-tab.q-focusable")===!0),x=v.length;if(x===0)return;if(a===36)return G(v[0]),v[0].focus(),!0;if(a===35)return G(v[x-1]),v[x-1].focus(),!0;const P=a===(e.vertical===!0?38:37),_=a===(e.vertical===!0?40:39),b=P===!0?-1:_===!0?1:void 0;if(b!==void 0){const N=z.value===!0?-1:1,F=v.indexOf(s)+b*N;return F>=0&&F<x&&(G(v[F]),v[F].focus({preventScroll:!0})),!0}}const et=f(()=>U.value===!0?{get:a=>Math.abs(a.scrollLeft),set:(a,s)=>{a.scrollLeft=-s}}:e.vertical===!0?{get:a=>a.scrollTop,set:(a,s)=>{a.scrollTop=s}}:{get:a=>a.scrollLeft,set:(a,s)=>{a.scrollLeft=s}});function tt(a){const s=p.value,{get:v,set:x}=et.value;let P=!1,_=v(s);const b=a<_?-1:1;return _+=b*5,_<0?(P=!0,_=0):(b===-1&&_<=a||b===1&&_>=a)&&(P=!0,_=a),x(s,_),Z(),P}function Le(a,s){for(const v in a)if(a[v]!==s[v])return!1;return!0}function nt(){let a=null,s={matchedLen:0,queryDiff:9999,hrefLen:0};const v=l.filter(b=>b.routeData!==void 0&&b.routeData.hasRouterLink.value===!0),{hash:x,query:P}=u.$route,_=Object.keys(P).length;for(const b of v){const N=b.routeData.exact.value===!0;if(b.routeData[N===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:F,query:fe,matched:ot,href:ut}=b.routeData.resolvedLink.value,me=Object.keys(fe).length;if(N===!0){if(F!==x||me!==_||Le(P,fe)===!1)continue;a=b.name.value;break}if(F!==""&&F!==x||me!==0&&Le(fe,P)===!1)continue;const H={matchedLen:ot.length,queryDiff:_-me,hrefLen:ut.length-F.length};if(H.matchedLen>s.matchedLen){a=b.name.value,s=H;continue}else if(H.matchedLen!==s.matchedLen)continue;if(H.queryDiff<s.queryDiff)a=b.name.value,s=H;else if(H.queryDiff!==s.queryDiff)continue;H.hrefLen>s.hrefLen&&(a=b.name.value,s=H)}a===null&&l.some(b=>b.routeData===void 0&&b.name.value===T.value)===!0||ve({name:a,setCurrent:!0})}function at(a){if(R(),M.value!==!0&&y.value!==null&&a.target&&typeof a.target.closest=="function"){const s=a.target.closest(".q-tab");s&&y.value.contains(s)===!0&&(M.value=!0,$.value===!0&&G(s))}}function rt(){k(()=>{M.value=!1},30)}function le(){Ee.avoidRouteWatcher===!1?g(nt):L()}function Ie(){if(c===void 0){const a=J(()=>u.$route.fullPath,le);c=()=>{a(),c=void 0}}}function it(a){l.push(a),S.value++,ie(),a.routeData===void 0||u.$route===void 0?g(()=>{if($.value===!0){const s=T.value,v=s!=null&&s!==""?l.find(x=>x.name.value===s):null;v&&G(v.rootRef.value)}}):(Ie(),a.routeData.hasRouterLink.value===!0&&le())}function lt(a){l.splice(l.indexOf(a),1),S.value--,ie(),c!==void 0&&a.routeData!==void 0&&(l.every(s=>s.routeData===void 0)===!0&&c(),le())}const Ee={currentModel:T,tabProps:D,hasFocus:M,hasActiveTab:O,registerTab:it,unregisterTab:lt,verifyRouteModel:le,updateModel:ve,onKbdNavigate:Je,avoidRouteWatcher:!1};Pt(Ue,Ee);function Me(){C!==null&&clearTimeout(C),K(),c!==void 0&&c()}let De;return re(Me),Te(()=>{De=c!==void 0,Me()}),xt(()=>{De===!0&&Ie(),ie()}),()=>h("div",{ref:y,class:de.value,role:"tablist",onFocusin:at,onFocusout:rt},[h(Qt,{onResize:Be}),h("div",{ref:p,class:m.value,onScroll:Z},Y(t.default)),h(ae,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(I.value===!0?"":" q-tabs__arrow--faded"),name:e.leftIcon||i.iconSet.tabs[e.vertical===!0?"up":"left"],onMousedownPassive:$e,onTouchstartPassive:$e,onMouseupPassive:K,onMouseleavePassive:K,onTouchendPassive:K}),h(ae,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(Q.value===!0?"":" q-tabs__arrow--faded"),name:e.rightIcon||i.iconSet.tabs[e.vertical===!0?"down":"right"],onMousedownPassive:Ae,onTouchstartPassive:Ae,onMouseupPassive:K,onMouseleavePassive:K,onTouchendPassive:K})])}});const Ce={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},Gt=Object.keys(Ce);Ce.all=!0;function je(e){const t={};for(const r of Gt)e[r]===!0&&(t[r]=!0);return Object.keys(t).length===0?Ce:(t.horizontal===!0?t.left=t.right=!0:t.left===!0&&t.right===!0&&(t.horizontal=!0),t.vertical===!0?t.up=t.down=!0:t.up===!0&&t.down===!0&&(t.vertical=!0),t.horizontal===!0&&t.vertical===!0&&(t.all=!0),t)}const Zt=["INPUT","TEXTAREA"];function Fe(e,t){return t.event===void 0&&e.target!==void 0&&e.target.draggable!==!0&&typeof t.handler=="function"&&Zt.includes(e.target.nodeName.toUpperCase())===!1&&(e.qClonedBy===void 0||e.qClonedBy.indexOf(t.uid)===-1)}function Jt(){if(window.getSelection!==void 0){const e=window.getSelection();e.empty!==void 0?e.empty():e.removeAllRanges!==void 0&&(e.removeAllRanges(),Bt.is.mobile!==!0&&e.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}function en(e){const t=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((r,u)=>{const i=parseFloat(r);i&&(t[u]=i)}),t}var tn=yt({name:"touch-swipe",beforeMount(e,{value:t,arg:r,modifiers:u}){if(u.mouse!==!0&&te.has.touch!==!0)return;const i=u.mouseCapture===!0?"Capture":"",n={handler:t,sensitivity:en(r),direction:je(u),noop:Rt,mouseStart(o){Fe(o,n)&&$t(o)&&(oe(n,"temp",[[document,"mousemove","move",`notPassive${i}`],[document,"mouseup","end","notPassiveCapture"]]),n.start(o,!0))},touchStart(o){if(Fe(o,n)){const d=o.target;oe(n,"temp",[[d,"touchmove","move","notPassiveCapture"],[d,"touchcancel","end","notPassiveCapture"],[d,"touchend","end","notPassiveCapture"]]),n.start(o)}},start(o,d){te.is.firefox===!0&&ge(e,!0);const k=Ne(o);n.event={x:k.left,y:k.top,time:Date.now(),mouse:d===!0,dir:!1}},move(o){if(n.event===void 0)return;if(n.event.dir!==!1){ee(o);return}const d=Date.now()-n.event.time;if(d===0)return;const k=Ne(o),R=k.left-n.event.x,g=Math.abs(R),L=k.top-n.event.y,y=Math.abs(L);if(n.event.mouse!==!0){if(g<n.sensitivity[1]&&y<n.sensitivity[1]){n.end(o);return}}else if(window.getSelection().toString()!==""){n.end(o);return}else if(g<n.sensitivity[2]&&y<n.sensitivity[2])return;const p=g/d,T=y/d;n.direction.vertical===!0&&g<y&&g<100&&T>n.sensitivity[0]&&(n.event.dir=L<0?"up":"down"),n.direction.horizontal===!0&&g>y&&y<100&&p>n.sensitivity[0]&&(n.event.dir=R<0?"left":"right"),n.direction.up===!0&&g<y&&L<0&&g<100&&T>n.sensitivity[0]&&(n.event.dir="up"),n.direction.down===!0&&g<y&&L>0&&g<100&&T>n.sensitivity[0]&&(n.event.dir="down"),n.direction.left===!0&&g>y&&R<0&&y<100&&p>n.sensitivity[0]&&(n.event.dir="left"),n.direction.right===!0&&g>y&&R>0&&y<100&&p>n.sensitivity[0]&&(n.event.dir="right"),n.event.dir!==!1?(ee(o),n.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Jt(),n.styleCleanup=$=>{n.styleCleanup=void 0,document.body.classList.remove("non-selectable");const I=()=>{document.body.classList.remove("no-pointer-events--children")};$===!0?setTimeout(I,50):I()}),n.handler({evt:o,touch:n.event.mouse!==!0,mouse:n.event.mouse,direction:n.event.dir,duration:d,distance:{x:g,y}})):n.end(o)},end(o){n.event!==void 0&&(be(n,"temp"),te.is.firefox===!0&&ge(e,!1),n.styleCleanup!==void 0&&n.styleCleanup(!0),o!==void 0&&n.event.dir!==!1&&ee(o),n.event=void 0)}};if(e.__qtouchswipe=n,u.mouse===!0){const o=u.mouseCapture===!0||u.mousecapture===!0?"Capture":"";oe(n,"main",[[e,"mousedown","mouseStart",`passive${o}`]])}te.has.touch===!0&&oe(n,"main",[[e,"touchstart","touchStart",`passive${u.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,t){const r=e.__qtouchswipe;r!==void 0&&(t.oldValue!==t.value&&(typeof t.value!="function"&&r.end(),r.handler=t.value),r.direction=je(t.modifiers))},beforeUnmount(e){const t=e.__qtouchswipe;t!==void 0&&(be(t,"main"),be(t,"temp"),te.is.firefox===!0&&ge(e,!1),t.styleCleanup!==void 0&&t.styleCleanup(),delete e.__qtouchswipe)}});function nn(){const e=new Map;return{getCache:function(t,r){return e[t]===void 0?e[t]=r:e[t]},getCacheWithFn:function(t,r){return e[t]===void 0?e[t]=r():e[t]}}}const an={name:{required:!0},disable:Boolean},We={setup(e,{slots:t}){return()=>h("div",{class:"q-panel scroll",role:"tabpanel"},Y(t.default))}},rn={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},ln=["update:modelValue","beforeTransition","transition"];function on(){const{props:e,emit:t,proxy:r}=X(),{getCacheWithFn:u}=nn();let i,n;const o=q(null),d=q(null);function k(m){const w=e.vertical===!0?"up":"left";B((r.$q.lang.rtl===!0?-1:1)*(m.direction===w?1:-1))}const R=f(()=>[[tn,k,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),g=f(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),L=f(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),y=f(()=>`--q-transition-duration: ${e.transitionDuration}ms`),p=f(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),T=f(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),$=f(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);J(()=>e.modelValue,(m,w)=>{const z=l(m)===!0?S(m):-1;n!==!0&&C(z===-1?0:z<S(w)?-1:1),o.value!==z&&(o.value=z,t("beforeTransition",m,w),He(()=>{t("transition",m,w)}))});function I(){B(1)}function Q(){B(-1)}function j(m){t("update:modelValue",m)}function l(m){return m!=null&&m!==""}function S(m){return i.findIndex(w=>w.props.name===m&&w.props.disable!==""&&w.props.disable!==!0)}function M(){return i.filter(m=>m.props.disable!==""&&m.props.disable!==!0)}function C(m){const w=m!==0&&e.animated===!0&&o.value!==-1?"q-transition--"+(m===-1?g.value:L.value):null;d.value!==w&&(d.value=w)}function B(m,w=o.value){let z=w+m;for(;z>-1&&z<i.length;){const U=i[z];if(U!==void 0&&U.props.disable!==""&&U.props.disable!==!0){C(m),n=!0,t("update:modelValue",U.props.name),setTimeout(()=>{n=!1});return}z+=m}e.infinite===!0&&i.length!==0&&w!==-1&&w!==i.length&&B(m,m===-1?i.length:-1)}function c(){const m=S(e.modelValue);return o.value!==m&&(o.value=m),!0}function D(){const m=l(e.modelValue)===!0&&c()&&i[o.value];return e.keepAlive===!0?[h(At,T.value,[h($.value===!0?u(p.value,()=>({...We,name:p.value})):We,{key:p.value,style:y.value},()=>m)])]:[h("div",{class:"q-panel scroll",style:y.value,key:p.value,role:"tabpanel"},[m])]}function O(){if(i.length!==0)return e.animated===!0?[h(Xe,{name:d.value},D)]:D()}function ce(m){return i=ct(Y(m.default,[])).filter(w=>w.props!==null&&w.props.slot===void 0&&l(w.props.name)===!0),i.length}function de(){return i}return Object.assign(r,{next:I,previous:Q,goTo:j}),{panelIndex:o,panelDirectives:R,updatePanelsList:ce,updatePanelIndex:c,getPanelContent:O,getEnabledPanels:M,getPanels:de,isValidPanelName:l,keepAliveProps:T,needsUniqueKeepAliveWrapper:$,goToPanelByOffset:B,goToPanel:j,nextPanel:I,previousPanel:Q}}var qe=W({name:"QTabPanel",props:an,setup(e,{slots:t}){return()=>h("div",{class:"q-tab-panel",role:"tabpanel"},Y(t.default))}});const xe={dark:{type:Boolean,default:null}};function Pe(e,t){return f(()=>e.dark===null?t.dark.isActive:e.dark)}var un=W({name:"QTabPanels",props:{...rn,...xe},emits:ln,setup(e,{slots:t}){const r=X(),u=Pe(e,r.proxy.$q),{updatePanelsList:i,getPanelContent:n,panelDirectives:o}=on(),d=f(()=>"q-tab-panels q-panel-parent"+(u.value===!0?" q-tab-panels--dark q-dark":""));return()=>(i(t),pt("div",{class:d.value},n(),"pan",e.swipeable,()=>o.value))}}),sn=W({name:"QAvatar",props:{...dt,fontSize:String,color:String,textColor:String,icon:String,square:Boolean,rounded:Boolean},setup(e,{slots:t}){const r=vt(e),u=f(()=>"q-avatar"+(e.color?` bg-${e.color}`:"")+(e.textColor?` text-${e.textColor} q-chip--colored`:"")+(e.square===!0?" q-avatar--square":e.rounded===!0?" rounded-borders":"")),i=f(()=>e.fontSize?{fontSize:e.fontSize}:null);return()=>{const n=e.icon!==void 0?[h(ae,{name:e.icon})]:void 0;return h("div",{class:u.value,style:r.value},[h("div",{class:"q-avatar__content row flex-center overflow-hidden",style:i.value},_t(t.default,n))])}}}),se=W({name:"QItemSection",props:{avatar:Boolean,thumbnail:Boolean,side:Boolean,top:Boolean,noWrap:Boolean},setup(e,{slots:t}){const r=f(()=>`q-item__section column q-item__section--${e.avatar===!0||e.side===!0||e.thumbnail===!0?"side":"main"}`+(e.top===!0?" q-item__section--top justify-start":" justify-center")+(e.avatar===!0?" q-item__section--avatar":"")+(e.thumbnail===!0?" q-item__section--thumbnail":"")+(e.noWrap===!0?" q-item__section--nowrap":""));return()=>h("div",{class:r.value},Y(t.default))}});const cn={ratio:[String,Number]};function dn(e,t){return f(()=>{const r=Number(e.ratio||(t!==void 0?t.value:void 0));return isNaN(r)!==!0&&r>0?{paddingBottom:`${100/r}%`}:null})}const vn=16/9;var fn=W({name:"QImg",props:{...cn,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:vn},placeholderSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:t,emit:r}){const u=q(e.initialRatio),i=dn(e,u);let n=null,o=!1;const d=[q(null),q(I())],k=q(0),R=q(!1),g=q(!1),L=f(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),y=f(()=>({width:e.width,height:e.height})),p=f(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition`),T=f(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));J(()=>$(),Q);function $(){return e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null}function I(){return e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null}function Q(c){n!==null&&(clearTimeout(n),n=null),g.value=!1,c===null?(R.value=!1,d[k.value^1].value=I()):R.value=!0,d[k.value].value=c}function j({target:c}){o!==!0&&(n!==null&&(clearTimeout(n),n=null),u.value=c.naturalHeight===0?.5:c.naturalWidth/c.naturalHeight,l(c,1))}function l(c,D){o===!0||D===1e3||(c.complete===!0?S(c):n=setTimeout(()=>{n=null,l(c,D+1)},50))}function S(c){o!==!0&&(k.value=k.value^1,d[k.value].value=null,R.value=!1,g.value=!1,r("load",c.currentSrc||c.src))}function M(c){n!==null&&(clearTimeout(n),n=null),R.value=!1,g.value=!0,d[k.value].value=null,d[k.value^1].value=I(),r("error",c)}function C(c){const D=d[c].value,O={key:"img_"+c,class:p.value,style:T.value,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...D};return k.value===c?(O.class+=" q-img__image--waiting",Object.assign(O,{onLoad:j,onError:M})):O.class+=" q-img__image--loaded",h("div",{class:"q-img__container absolute-full",key:"img"+c},h("img",O))}function B(){return R.value!==!0?h("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},Y(t[g.value===!0?"error":"default"])):h("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},t.loading!==void 0?t.loading():e.noSpinner===!0?void 0:[h(ft,{color:e.spinnerColor,size:e.spinnerSize})])}return Q($()),re(()=>{o=!0,n!==null&&(clearTimeout(n),n=null)}),()=>{const c=[];return i.value!==null&&c.push(h("div",{key:"filler",style:i.value})),g.value!==!0&&(d[0].value!==null&&c.push(C(0)),d[1].value!==null&&c.push(C(1))),c.push(h(Xe,{name:"q-transition--fade"},B)),h("div",{class:L.value,style:y.value,role:"img","aria-label":e.alt},c)}}}),mn=W({name:"QItem",props:{...xe,...mt,tag:{type:String,default:"div"},active:{type:Boolean,default:null},clickable:Boolean,dense:Boolean,insetLevel:Number,tabindex:[String,Number],focused:Boolean,manualFocus:Boolean},emits:["click","keyup"],setup(e,{slots:t,emit:r}){const{proxy:{$q:u}}=X(),i=Pe(e,u),{hasLink:n,linkAttrs:o,linkClass:d,linkTag:k,navigateOnClick:R}=ht(),g=q(null),L=q(null),y=f(()=>e.clickable===!0||n.value===!0||e.tag==="label"),p=f(()=>e.disable!==!0&&y.value===!0),T=f(()=>"q-item q-item-type row no-wrap"+(e.dense===!0?" q-item--dense":"")+(i.value===!0?" q-item--dark":"")+(n.value===!0&&e.active===null?d.value:e.active===!0?` q-item--active${e.activeClass!==void 0?` ${e.activeClass}`:""}`:"")+(e.disable===!0?" disabled":"")+(p.value===!0?" q-item--clickable q-link cursor-pointer "+(e.manualFocus===!0?"q-manual-focusable":"q-focusable q-hoverable")+(e.focused===!0?" q-manual-focusable--focused":""):"")),$=f(()=>{if(e.insetLevel===void 0)return null;const l=u.lang.rtl===!0?"Right":"Left";return{["padding"+l]:16+e.insetLevel*56+"px"}});function I(l){p.value===!0&&(L.value!==null&&(l.qKeyEvent!==!0&&document.activeElement===g.value?L.value.focus():document.activeElement===L.value&&g.value.focus()),R(l))}function Q(l){if(p.value===!0&&Ke(l,13)===!0){ee(l),l.qKeyEvent=!0;const S=new MouseEvent("click",l);S.qKeyEvent=!0,g.value.dispatchEvent(S)}r("keyup",l)}function j(){const l=wt(t.default,[]);return p.value===!0&&l.unshift(h("div",{class:"q-focus-helper",tabindex:-1,ref:L})),l}return()=>{const l={ref:g,class:T.value,style:$.value,role:"listitem",onClick:I,onKeyup:Q};return p.value===!0?(l.tabindex=e.tabindex||"0",Object.assign(l,o.value)):y.value===!0&&(l["aria-disabled"]="true"),h(k.value,l,j())}}}),hn=W({name:"QCard",props:{...xe,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(e,{slots:t}){const{proxy:{$q:r}}=X(),u=Pe(e,r),i=f(()=>"q-card"+(u.value===!0?" q-card--dark q-dark":"")+(e.bordered===!0?" q-card--bordered":"")+(e.square===!0?" q-card--square no-border-radius":"")+(e.flat===!0?" q-card--flat no-shadow":""));return()=>h(e.tag,{class:i.value},Y(t.default))}});const gn={name:"TrackList",props:{items:Array},data(){return{audioSrc:"",currentlyPlaying:null}},methods:{playPreview(e){if(this.currentlyPlaying===e.preview_url){this.$refs.audio.pause(),this.currentlyPlaying=null;return}this.audioSrc=e.preview_url,this.$nextTick(()=>{this.$refs.audio.play(),this.currentlyPlaying=e.preview_url})}}},bn={class:"text-subtitle1"},yn={class:"text-caption text-grey-7"},pn=["src"];function _n(e,t,r,u,i,n){return ne(),Qe("div",null,[(ne(!0),Qe(Lt,null,It(r.items,(o,d)=>(ne(),Se(hn,{class:"q-mb-sm",key:o.uri,flat:"",bordered:""},{default:V(()=>[A(mn,null,{default:V(()=>[A(se,{avatar:""},{default:V(()=>[A(sn,{color:"primary","text-color":"white"},{default:V(()=>[Et(pe(d+1),1)]),_:2},1024)]),_:2},1024),A(se,{avatar:""},{default:V(()=>[A(fn,{src:o.album.images[2].url,style:{width:"64px",height:"64px"}},null,8,["src"])]),_:2},1024),A(se,null,{default:V(()=>[ye("div",bn,pe(o.name),1),ye("div",yn,pe(o.artists[0].name),1)]),_:2},1024),o.preview_url?(ne(),Se(se,{key:0,side:""},{default:V(()=>[A(gt,{flat:"",round:"",dense:"",icon:"play_arrow",onClick:k=>n.playPreview(o),disable:i.currentlyPlaying===o.preview_url},null,8,["onClick","disable"])]),_:2},1024)):Mt("",!0)]),_:2},1024)]),_:2},1024))),128)),ye("audio",{ref:"audio",src:i.audioSrc,onEnded:t[0]||(t[0]=o=>i.currentlyPlaying=null)},null,40,pn)])}var wn=Ye(gn,[["render",_n]]);const kn=Dt({name:"IndexPage",components:{TrackList:wn},setup(){const e=zt(),t=q("short");return{auth:e,tab:t}},data(){return{short_ranking:[],medium_ranking:[],long_ranking:[]}},async created(){this.auth.isTokenExpired()&&await this.refreshToken(),this.getUser(),this.getRankings()},methods:{getUser(){this.$axios.get("https://api.spotify.com/v1/me",{headers:{Authorization:`Bearer ${this.auth.accessToken}`}}).then(e=>{this.auth.user=e.data}).catch(e=>{console.error(e)})},getRankings(){["short_term","medium_term","long_term"].forEach(t=>{this.$axios.get("https://api.spotify.com/v1/me/top/tracks",{params:{time_range:t,limit:50},headers:{Authorization:`Bearer ${this.auth.accessToken}`}}).then(r=>{this[`${t.split("_")[0]}_ranking`]=r.data.items}).catch(r=>{console.error(r)})})},async refreshToken(){if(!this.auth.refresh_token){this.$router.push("/");return}const e=new URLSearchParams({grant_type:"refresh_token",refresh_token:this.auth.refresh_token,client_id:this.auth.clientId});try{const t=await this.$axios.post("https://accounts.spotify.com/api/token",e,{headers:{"Content-Type":"application/x-www-form-urlencoded"}});this.auth.setTokens(t.data.access_token,this.auth.refresh_token,Date.now()+t.data.expires_in*1e3)}catch(t){console.error("Refresh token failed",t),this.auth.logout(),this.$router.push("/")}}}});function qn(e,t,r,u,i,n){const o=Nt("track-list");return ne(),Se(Vt,{class:"q-pa-md"},{default:V(()=>[A(Yt,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=d=>e.tab=d),dense:"",class:"text-teal","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:V(()=>[A(we,{name:"short",label:"\u8FD1\u56DB\u5468"}),A(we,{name:"medium",label:"\u8FD1\u534A\u5E74"}),A(we,{name:"long",label:"\u9577\u671F"})]),_:1},8,["modelValue"]),A(un,{modelValue:e.tab,"onUpdate:modelValue":t[1]||(t[1]=d=>e.tab=d),animated:"",swipeable:""},{default:V(()=>[A(qe,{name:"short"},{default:V(()=>[A(o,{items:e.short_ranking},null,8,["items"])]),_:1}),A(qe,{name:"medium"},{default:V(()=>[A(o,{items:e.medium_ranking},null,8,["items"])]),_:1}),A(qe,{name:"long"},{default:V(()=>[A(o,{items:e.long_ranking},null,8,["items"])]),_:1})]),_:1},8,["modelValue"])]),_:1})}var Bn=Ye(kn,[["render",qn]]);export{Bn as default};
